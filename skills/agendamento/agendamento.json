{
    "onboarding": {
        "$contentActions": [
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "e624d0bc-ce5d-4c2a-9831-e9511f0df3d1",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": false,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:1360",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "9cd303cb-6275-4a1b-abac-32931b2dc539",
                "$connId": "con_6009",
                "conditions": [
                    { "source": "input", "comparison": "exists", "values": [] }
                ],
                "$invalid": false
            }
        ],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [
            {
                "type": "SetVariable",
                "$title": "Set origem",
                "$invalid": false,
                "settings": { "variable": "flOrigem", "value": "Inicio" },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Config breakLineTag",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contactIdentity) {\n    contactDomain = contactIdentity.split(\"@\")[1];\n    let breakLineTag = \"<br/>\";\n\n    if(contactDomain === \"wa.gw.msging.net\" || contactDomain === \"tunnel.msging.net\"){\n        breakLineTag = '\\n';\n    }\n\n    return breakLineTag;\n}",
                    "inputVariables": ["contact.identity"],
                    "outputVariable": "breakLineTag"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Config boldTags",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contactIdentity) {\n    contactDomain = contactIdentity.split(\"@\")[1];\n    boldTags = {\n        open: \"*\",\n        close: \"*\"\n    }\n    switch (contactDomain) {\n        case 'wa.gw.msging.net':\n        case 'tunnel.msging.net':\n            boldTags = {\n                \"open\": \"*\",\n                \"close\": \"*\"\n            };\n            return boldTags;\n\n        case '0mn.io':\n            boldTags = {\n                \"open\": \"<b>\",\n                \"close\": \"</b>\"\n            };\n            return boldTags;\n    }\n    return boldTags;\n}",
                    "inputVariables": ["contact.identity"],
                    "outputVariable": "boldTags"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Check is router",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "\nfunction run(contactIdentity) {\n    var domain = contactIdentity.split(\"@\")[1];\n    var isBotRouter = false;\n\n    if (domain === \"tunnel.msging.net\"){\n        isBotRouter = true;\n    }\n\n    return isBotRouter;\n}",
                    "inputVariables": ["contact.identity"],
                    "outputVariable": "isBotRouter"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Get phone",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(input){\n    var numberPattern = /\\d+/g;\n    var rmCountry = /(^550|^55|^0)/g;\n    let valid = false;\n    let phone = \"\";\n    let aux;\n\n    if(numberPattern.test(input) == true){\n        aux = input.match(numberPattern);\n        for(i = 0; i < aux.length; i++)\n            phone += aux[i]\n        if(rmCountry.test(phone) && phone.length > 11){\n            phone = phone.replace(rmCountry, \"\");\n        }\n        if(phone.length >= 10 && phone.length <= 11)\n            valid = true;\n    }\n    return phone;\n}",
                    "inputVariables": ["contact.identity"],
                    "outputVariable": "phone"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:17252",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "isBotRouter",
                        "values": ["false"]
                    }
                ]
            },
            {
                "type": "ExecuteScript",
                "$title": "Get phone router",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(input){\n    var numberPattern = /\\d+/g;\n    var rmCountry = /(^550|^55|^0)/g;\n    let valid = false;\n    let phone = \"\";\n    let aux;\n\n\n    if(numberPattern.test(input) == true){\n        aux = input.match(numberPattern);\n        for(i = 0; i < aux.length; i++)\n            phone += aux[i]\n        if(rmCountry.test(phone) && phone.length > 11){\n            phone = phone.replace(rmCountry, \"\");\n        }\n        if(phone.length >= 10 && phone.length <= 11)\n            valid = true;\n    }\n    return phone;\n}",
                    "inputVariables": ["tunnel.originator"],
                    "outputVariable": "phone"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:15581",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "isBotRouter",
                        "values": ["true"]
                    }
                ]
            },
            {
                "type": "MergeContact",
                "$title": "Save Phone",
                "$invalid": false,
                "settings": {
                    "extras": {},
                    "name": "{{contact.name}}",
                    "phoneNumber": "{{phone}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:88992",
                        "source": "context",
                        "comparison": "notExists",
                        "variable": "contact.extras.retorno",
                        "values": []
                    }
                ]
            },
            {
                "$id": "54fb4cd8-094f-4f60-af98-8708a9dc2d0b",
                "type": "ExecuteScript",
                "$title": "Get Length Input",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "\nfunction run(input) {\n    return input.length;\n}",
                    "inputVariables": ["input.content"],
                    "outputVariable": "inputLength"
                },
                "conditions": []
            },
            {
                "type": "ProcessHttp",
                "$title": "Check Intention",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "GET",
                    "uri": "{{config.api}}/SmallTalks/intention?userInput={{input.content}}",
                    "responseStatusVariable": "smallTalksStatus",
                    "responseBodyVariable": "intention"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:11154",
                        "source": "context",
                        "comparison": "lessThan",
                        "variable": "inputLength",
                        "values": ["15"]
                    }
                ]
            },
            {
                "type": "MergeContact",
                "$title": "Save tunnel.originator",
                "$invalid": false,
                "settings": {
                    "extras": { "tunnel.originator": "{{tunnel.originator}}" },
                    "name": "{{contact.name}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:11528",
                        "source": "context",
                        "comparison": "exists",
                        "values": [],
                        "variable": "tunnel.originator"
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET LASTORIGINEXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "lastOriginException",
                    "value": "empty"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "RESET COUNTEXCEPTION",
                "$invalid": false,
                "settings": { "variable": "countException", "value": "0" },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET NLP RETURN",
                "$invalid": false,
                "settings": { "variable": "nlpReturn", "value": "empty" },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Reset exception return",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run() {\n    var exceptionReturn = {showMsg: true};\n\n   \n    return exceptionReturn;\n}",
                    "inputVariables": [],
                    "outputVariable": "exceptionReturn"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#FF1E90",
                "label": "MergeContact",
                "id": "blip-tag-86ea71d8-f490-77f7-b4e3-28a05d2a67b2",
                "canChangeBackground": false
            },
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "onboarding",
        "root": true,
        "$position": { "top": "27.5714px", "left": "647px" },
        "$title": "Início",
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "fallback": {
        "$contentActions": [
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "d0887b4f-4a3e-49ef-859e-8ea38bd06e74",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:1107",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Check COVID19",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(userInput) {\n    try{\n        var result = false;\n        userInput = userInput.toLowerCase();\n        let optionCovid19 = /(corona|cornoavirus|coronav(i|í)rus|epidemia|pandemia|covid|doen(ç|c)a|gripe|quarentena|infectado|v(i|í)rus|gripad(a|o)|resfriad(a|o))/i;\n\n        if(optionCovid19.test(userInput)){\n            result = true;\n        }\n\n        return result;\n\n    }catch(e){\n        return false;\n    }\n}",
                    "inputVariables": ["input.content"],
                    "outputVariable": "isAboutConvid19"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Track COVID19",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Corona virus input origem",
                    "action": "{{input.content}} | {{flOrigem}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:11597",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "isAboutConvid19",
                        "values": ["true"]
                    }
                ]
            }
        ],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "onboarding", "$invalid": false },
        "id": "fallback",
        "$position": { "top": "35.7778px", "left": "4372.67px" },
        "$title": "Exceções",
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "9cd303cb-6275-4a1b-abac-32931b2dc539": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "796792ae-c885-4390-8b94-5c39967b61e3",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "796792ae-c885-4390-8b94-5c39967b61e3",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:14395"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "e3de1cb8-18eb-4672-a21c-a45576d46ac4",
                        "type": "text/plain",
                        "content": "Vou precisar de algumas informações para continuar o seu agendamento"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "e3de1cb8-18eb-4672-a21c-a45576d46ac4",
                            "type": "text/plain",
                            "content": "Vou precisar de algumas informações para continuar o seu agendamento"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:14396"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "08942677-b5c9-4b1c-ae9c-9831a93c901a",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:12900",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "6764602f-578d-47b6-bd68-4da1482539be",
                "$connId": "con_33",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:48661"
                    }
                ],
                "$$hashKey": "object:48642",
                "$invalid": false
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "TrackEvent",
                "$title": "Cadastro origem",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Cadastro origem",
                    "action": "{{context.flOrigem}}"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "SetVariable",
                "$title": "Force reset reSchedule",
                "$invalid": false,
                "settings": { "variable": "reSchedule", "value": "false" },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "Force reset changeOnlyDateAndTime",
                "$invalid": false,
                "settings": {
                    "variable": "changeOnlyDateAndTime",
                    "value": "false"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "FORCE RESET changeOnlyProvider",
                "$invalid": false,
                "settings": {
                    "variable": "changeOnlyProvider",
                    "value": "false"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "9cd303cb-6275-4a1b-abac-32931b2dc539",
        "root": false,
        "$title": "C.1.0 - Cadastro Geral",
        "$position": { "top": "292px", "left": "955px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "b831ad24-b74b-4d38-9720-96d51d9d2aab": {
        "$contentActions": [
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "771c4b81-4abc-472a-b16e-14c2e52dda93",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:16006",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "8647aab4-8645-441c-a004-02d1c6de92c2",
                "$connId": "con_38",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["input inesperado"],
                        "$$hashKey": "object:51681",
                        "variable": "cepValidate"
                    },
                    {
                        "$$hashKey": "object:7267",
                        "source": "context",
                        "comparison": "notExists",
                        "values": [],
                        "variable": "viacepEndereco@erro"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:51672"
            },
            {
                "stateId": "abe8196f-d6bc-48c7-9a43-1ec1d2a8489a",
                "$connId": "con_43",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Disagreement", "Negation", "Confusion"],
                        "$$hashKey": "object:54599",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:54591"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "SetVariable",
                "$title": "Set UseCoordinate",
                "$invalid": false,
                "settings": { "variable": "useCoordinate", "value": "false" },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "TRACKING VALIDATE",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(input){ //Passar input.content como parametro\n    let removeDigits = /\\d+/g;\n\n    //Textos Opcoes\n    let textOne = \"cep enviado\";\n    let textTwo = \"nao sei\";\n    \n    //Validacao das opções por expressao regular\n    let optionTwo = /(n+(a|ã)+o+|^n$)/i;\n\n\tlet aux;\n\tlet value = \"input inesperado\";\n\tlet result = value;\n\n    if(removeDigits.test(input)){\n        aux = input.replace(/\\D/g,'');\n        if(aux.length != 8){\n            return result;\n        }\n        return textOne;\n    }else if(optionTwo.test(input)){\n        value = textTwo;\n    }\n\n\tresult = value;\n\n\treturn result;\n\n}",
                    "inputVariables": ["input.content"],
                    "outputVariable": "trackInput"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "VALIDACAO INPUT",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "\n\nfunction run(input){ //Passar input.content como parametro\n    let removeDigits = /\\d+/g;\n\tlet aux;\n\tlet value = \"input inesperado\";\n\tlet result = value;\n\n    if(removeDigits.test(input)){\n        aux = input.replace(/\\D/g,'');\n        if(aux.length != 8){\n            return result;\n        }\n        value = aux;\n    }\n\n\tresult = value;\n\n\treturn result;\n\n}",
                    "inputVariables": ["input.content"],
                    "outputVariable": "cepValidate"
                },
                "conditions": []
            },
            {
                "type": "ProcessHttp",
                "$title": "Get Endereco",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "GET",
                    "uri": "https://viacep.com.br/ws/{{cepValidate}}/json/",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "viacepEndereco"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:20662",
                        "source": "context",
                        "comparison": "equals",
                        "values": ["cep enviado"],
                        "variable": "trackInput"
                    }
                ]
            },
            {
                "type": "MergeContact",
                "$title": "Update CEP",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "cep": "{{cepValidate}}",
                        "logradouro": "{{viacepEndereco@logradouro}}",
                        "complemento": "{{viacepEndereco@complemento}}",
                        "bairro": "{{viacepEndereco@bairro}}",
                        "cidade": "{{viacepEndereco@localidade}}",
                        "estado": "{{viacepEndereco@uf}}"
                    },
                    "name": "{{contact.name}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:7113",
                        "source": "context",
                        "comparison": "equals",
                        "values": ["cep enviado"],
                        "variable": "trackInput"
                    },
                    {
                        "$$hashKey": "object:9196",
                        "source": "context",
                        "comparison": "notExists",
                        "values": [],
                        "variable": "viacepEndereco@erro"
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Nao sei cep quantidade",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Nao sei cep",
                    "action": "quantidade"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:57533",
                        "source": "context",
                        "comparison": "equals",
                        "values": ["nao sei"],
                        "variable": "trackInput"
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado cep",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado cep",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:10205",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Disagreement", "Negation"]
                    },
                    {
                        "$$hashKey": "object:11152",
                        "source": "input",
                        "comparison": "matches",
                        "values": ["[A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ]"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao cep selecao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "action": "{{trackInput}}",
                    "category": "Solicitacao cep selecao"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET exception Identifier",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "5.7"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API Exception",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:97595",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks | Consulta Endereco"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#FF1E90",
                "label": "MergeContact",
                "id": "blip-tag-86ea71d8-f490-77f7-b4e3-28a05d2a67b2",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "b831ad24-b74b-4d38-9720-96d51d9d2aab",
        "root": false,
        "$title": "C.1.5 - Solicita Cep",
        "$position": { "top": "638px", "left": "1231px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "6764602f-578d-47b6-bd68-4da1482539be": {
        "$contentActions": [
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "6054d709-5514-4322-a8ac-cd552b9d8704",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:18698",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "a831e432-3802-4b80-b6f3-f8ac9b7e8bc4",
                "$connId": "con_48",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:20705"
                    }
                ],
                "$$hashKey": "object:20686",
                "$invalid": false
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "TrackEvent",
                "$title": "Orientacao endereco origem",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Orientacao endereco origem",
                    "action": "{{context.flOrigem}}"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "6764602f-578d-47b6-bd68-4da1482539be",
        "root": false,
        "$title": "C.1.1 - Orientação endereço",
        "$position": { "top": "463px", "left": "954px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "8647aab4-8645-441c-a004-02d1c6de92c2": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "9b6d5bc5-7c4e-41e8-ad52-f7895d7cc65b",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "9b6d5bc5-7c4e-41e8-ad52-f7895d7cc65b",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:52093"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "c73acb16-dcc3-49e9-98f4-58b4a7b0151b",
                        "type": "text/plain",
                        "content": "⏳ Só um instante buscando "
                    },
                    "$cardContent": {
                        "document": {
                            "id": "c73acb16-dcc3-49e9-98f4-58b4a7b0151b",
                            "type": "text/plain",
                            "content": "⏳ Só um instante buscando "
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:22325"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "ea16cc8e-070b-4d37-86a9-2ab9c4ea3b39",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": "4000" }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "ea16cc8e-070b-4d37-86a9-2ab9c4ea3b39",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": "4000"
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:22324"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "d00adb15-4605-439b-a3f1-f62ae0aef78e",
                        "type": "text/plain",
                        "content": "Ótimo, já achei aqui!"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "d00adb15-4605-439b-a3f1-f62ae0aef78e",
                            "type": "text/plain",
                            "content": "Ótimo, já achei aqui!"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:52094"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "4eb60678-5947-403a-a48b-fc18c6b133f8",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:51777",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "fcb2f3fd-3498-4d67-9280-eff889522979",
                "$connId": "con_53",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:8996"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:8977"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "TrackEvent",
                "$title": "Exibicao cep exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Exibicao cep",
                    "action": "exibicao"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "8647aab4-8645-441c-a004-02d1c6de92c2",
        "root": false,
        "$title": "C.1.7 - Confirmação do recebimento do cep",
        "$position": { "top": "615px", "left": "1478px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "12424a9f-0f7c-412b-bdfb-fe789b90b245": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "d347a740-c1b6-48b1-8ead-d440e6d53a9d",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "d347a740-c1b6-48b1-8ead-d440e6d53a9d",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:37764"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "5fb2a933-648d-4e1d-b1a4-c2c7d3e65484",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "5fb2a933-648d-4e1d-b1a4-c2c7d3e65484",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:37765"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "72741e9e-14cc-4960-8a95-15ec64a1839b",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:53047",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "fcb2f3fd-3498-4d67-9280-eff889522979",
                "$connId": "con_58",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:38222",
                        "variable": "referencia"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:38213"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Por último, preciso de um ponto de referência';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao referencia origem",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao referencia origem",
                    "action": "{{context.flOrigem}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:79160",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao referencia exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao referencia",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:80342",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ProcessHttp",
                "$title": "Requisição HTTP",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "GET",
                    "uri": "{{config.api}}/SmallTalks/clean/{{input.content}}",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "referencia"
                },
                "conditions": []
            },
            {
                "type": "MergeContact",
                "$title": "Update Referencia",
                "$invalid": false,
                "settings": {
                    "extras": { "referencia": "{{referencia}}" },
                    "name": "{{contact.name}}"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET EXCEPTION IDENTIFIER",
                "$invalid": false,
                "settings": {
                    "value": "3.1",
                    "variable": "exceptionIdentifier"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:109757",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#FF1E90",
                "label": "MergeContact",
                "id": "blip-tag-86ea71d8-f490-77f7-b4e3-28a05d2a67b2",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "12424a9f-0f7c-412b-bdfb-fe789b90b245",
        "root": false,
        "$title": "C.1.13 - Ponto de referência",
        "$position": { "top": "798.571px", "left": "2044px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "cec79cf2-34a3-47dc-b9d6-eab9bc9cbf08": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "738a18af-0af5-4e5c-98c1-fc5b7528b4ba",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "738a18af-0af5-4e5c-98c1-fc5b7528b4ba",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:10014"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "5b2a1c30-9f8c-4693-abc1-f6e9612bb85b",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "5b2a1c30-9f8c-4693-abc1-f6e9612bb85b",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:10015"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "70507a70-767e-443c-9858-dc76efd78b80",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:54695",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "699135cf-4d9a-4a16-b812-db95778bec5a",
                "$connId": "con_63",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Input inesperado"],
                        "$$hashKey": "object:50082",
                        "variable": "validInput"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:50074"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'De qual {{boldTags@open}}cidade?{{boldTags@close}}';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao cidade",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao cidade",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:35963",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "VALIDACAO ENTRADA",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "//FORMAT MSG\n//Input: input.content\n//Output: validInput\n\n    function run(input) {\n        let value = \"Input inesperado\";\n        \n        try{\n            let valid = false;\n            let removeDigits = /\\d+/; //Confere a existencia de digitos\n            let rm = /(^o\\s+|\\s+e\\s+|\\s+é\\s+|^é\\s+|\\s+cidade\\s+(é|e)\\s+|\\s+ess(e|a)\\s+(é|e)\\s+|\\s+ess(e|a)\\s+|\\s+cidade\\s+|\\s+aqui\\s+|\\s+est(á|a)\\s+|\\s*ok\\s+|\\s*cu\\s*|\\s*fdp\\s*|\\s*filho\\s*da\\s*puta|\\s*teste\\s*|\\s*desgra(c|ç)a(do|da))/gi; //Remove alguns termos de resposta do usuario\n\t\t    let re = /([a-zA-Z\\u00C0-\\u00FF ']{3,40})+/; //Captura nome\n\t\t    let name = input.replace(rm, '');\n            name = name.replace(/( +(?= )|^\\s+|\\s+$)/g,'');  //Remove espacos adicionais\n        \n            if(removeDigits.test(name) == true){\n                return value;\n            }        \n\n            if(re.test(name) == true)\n                if(name.match(re)[0] != \" \"){\n                    valid = true;\n                    value = name.match(re)[0];\n            }\n        }catch(e){\n            value = \"Input inesperado\";\n        }\n\n        \n            \n        return value;\n    }\n\n",
                    "inputVariables": ["input.content"],
                    "outputVariable": "validInput"
                },
                "conditions": []
            },
            {
                "type": "MergeContact",
                "$title": "Update Cidade",
                "$invalid": false,
                "settings": {
                    "extras": { "cidade": "{{validInput}}" },
                    "name": "{{contact.name}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:65277",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "validInput",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET EXCEPTION IDENTIFIER",
                "$invalid": false,
                "settings": {
                    "value": "5.8",
                    "variable": "exceptionIdentifier"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API Exception",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:99500",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF1E90",
                "label": "MergeContact",
                "id": "blip-tag-86ea71d8-f490-77f7-b4e3-28a05d2a67b2",
                "canChangeBackground": false
            },
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "cec79cf2-34a3-47dc-b9d6-eab9bc9cbf08",
        "root": false,
        "$title": "C.1.8 - Solicita Cidade",
        "$position": { "top": "221px", "left": "1436px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "699135cf-4d9a-4a16-b812-db95778bec5a": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "3efc7fac-56ab-4e65-ac1b-37118936d823",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "3efc7fac-56ab-4e65-ac1b-37118936d823",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:19477"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "c812ad6f-67c0-40ab-b594-25bc35dca46f",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "c812ad6f-67c0-40ab-b594-25bc35dca46f",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:19478"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "10312940-9b93-4375-8578-b905500e6432",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:19161",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "fcb2f3fd-3498-4d67-9280-eff889522979",
                "$connId": "con_68",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Input inesperado"],
                        "$$hashKey": "object:25655",
                        "variable": "validInput"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:25646"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Ok, Qual o {{boldTags@open}}estado?{{boldTags@close}}';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicita estado exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao estado",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:46735",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "VALIDACAO ENTRADA",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "//Input: input.content\n//Output: validInput\n\nfunction run(input) {\n    let removeDigits = /\\d+/;\n    let aux;\n    const invalid = \"Input inesperado\";\n\n    try{\n        if(removeDigits.test(input)){\n            aux = input.match(removeDigits)[0];\n            if(aux.length != 1){\n                return invalid;\n            }\n        }\n\n        const optionsRegex = {\n            \"(minas|^mg$)\": \"MG\",\n            \"(s(ã|a)o\\\\s*paulo|^sp$)\": \"SP\",\n            \"(^rio$|rio\\\\s*de\\\\s*janeiro|^rj$)\": \"RJ\",\n            \"(esp(í|i)rito\\\\s*santo|^es$)\": \"ES\",\n            \"(paran(á|a)|^pr$)\": \"PR\",\n            \"(santa\\\\s*catarina|^sc$)\": \"SC\",\n            \"(rio\\\\s*grande\\\\s*(do\\\\s*)?sul|^rs$)\": \"RS\",\n            \"(bahia|^ba$)\": \"BA\",\n            \"(sergipe|^se$)\": \"SE\",\n            \"(alagoas|^al$)\": \"AL\",\n            \"(pernambuco|^pe$)\": \"PE\",\n            \"(para(í|i)ba|^pb$)\": \"PB\",\n            \"(rio\\\\s*grande\\\\s*(do\\\\s*)?norte|^rn$)\": \"RN\",\n            \"(ce(á|a)r(á|a)|^ce$)\": \"CE\",\n            \"(pia(ú|u)(í|i)|^pi$)\": \"PI\",\n            \"(maranh(ã|a)o|^ma$)\": \"MA\",\n            \"(tocantins|^to$)\": \"TO\",\n            \"(go(í|i)(á|a)s|^go$)\": \"GO\",\n            \"(mato\\\\s*grosso\\\\s*do\\\\s*sul|^ms$)\": \"MS\",\n            \"(mato\\\\s*grosso|^mt$)\": \"MT\",\n            \"(par(á|a)|^pa$)\": \"PA\",\n            \"(amap(á|a)|^ap$)\": \"AP\",\n            \"(rond(o|ô)nia|^ro$)\": \"RO\",\n            \"(acre|^ac$)\": \"AC\",\n            \"(amazonas|^am$)\": \"AM\",\n            \"(roraima|^rr$)\": \"RR\",\n        };\n\n        for(let key in optionsRegex) {\n\n            if(optionsRegex.hasOwnProperty(key)) {\n                const matching = new RegExp(key, \"i\");\n\n                if(matching.test(input)) {\n                    return optionsRegex[key];\n                }\n            }\n        }\n    }catch(e){\n        return invalid;\n    }\n    return invalid;\n}",
                    "inputVariables": ["input.content"],
                    "outputVariable": "validInput"
                },
                "conditions": []
            },
            {
                "type": "MergeContact",
                "$title": "Update Estado",
                "$invalid": false,
                "settings": {
                    "extras": { "estado": "{{validInput}}" },
                    "name": "{{contact.name}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:65768",
                        "comparison": "notEquals",
                        "source": "context",
                        "variable": "validInput",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET EXCEPTION IDENTIFIER",
                "$invalid": false,
                "settings": {
                    "value": "5.9",
                    "variable": "exceptionIdentifier"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "Set API Exception",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:101431",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            },
            {
                "type": "MergeContact",
                "$title": "SET ADDR",
                "$invalid": false,
                "settings": {
                    "extras": { "secondItAddr": "true" },
                    "name": "{{contact.name}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:86751",
                        "source": "context",
                        "comparison": "notExists",
                        "variable": "contact.extras.secondItAddr",
                        "values": []
                    }
                ]
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF1E90",
                "label": "MergeContact",
                "id": "blip-tag-86ea71d8-f490-77f7-b4e3-28a05d2a67b2",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "699135cf-4d9a-4a16-b812-db95778bec5a",
        "root": false,
        "$title": "C.1.9 - Solicita Estado",
        "$position": { "top": "231px", "left": "1696px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "da039867-7285-400f-aeb4-1937ed4b33f8": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "f2d98d00-a4a6-4f7e-a477-3ca64841f5df",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "f2d98d00-a4a6-4f7e-a477-3ca64841f5df",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:23857"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "5d104290-8635-4d18-bdef-d2603fcb6adc",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "5d104290-8635-4d18-bdef-d2603fcb6adc",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:23858"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "72eb9fdf-cdba-4641-bd76-74da188d6ff6",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:23541",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "56da1e07-0945-417d-a2cb-b634e538f445",
                "$connId": "con_73",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:27411",
                        "variable": "logradouro"
                    },
                    {
                        "$$hashKey": "object:27043",
                        "source": "intent",
                        "comparison": "notExists",
                        "values": []
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:27402"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Perfeito, agora digite o logradouro, por exemplo: qual sua rua, avenida, etc..';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao logradouro",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao logradouro",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:53010",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ProcessHttp",
                "$title": "Small Talks Clean",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "GET",
                    "uri": "{{config.api}}/SmallTalks/clean/{{input.content}}",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "logradouro"
                },
                "conditions": []
            },
            {
                "type": "MergeContact",
                "$title": "Update Logradouro",
                "$invalid": false,
                "settings": {
                    "extras": { "logradouro": "{{logradouro}}" },
                    "name": "{{contact.name}}"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET EXCEPTION IDENTIFIER",
                "$invalid": false,
                "settings": {
                    "value": "5.10",
                    "variable": "exceptionIdentifier"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:103380",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF1E90",
                "label": "MergeContact",
                "id": "blip-tag-86ea71d8-f490-77f7-b4e3-28a05d2a67b2",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "da039867-7285-400f-aeb4-1937ed4b33f8",
        "root": false,
        "$title": "C.1.10 Solicita Logradouro",
        "$position": { "top": "325px", "left": "2044px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "56da1e07-0945-417d-a2cb-b634e538f445": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "b96e841c-21ef-49f9-a500-ffa7db6f980d",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "b96e841c-21ef-49f9-a500-ffa7db6f980d",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:24591"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "6730d2ce-9438-44fd-9349-4b938105538a",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "6730d2ce-9438-44fd-9349-4b938105538a",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:24592"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "29da01f6-dbe1-41b5-a484-3a95478f239f",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "text",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:24275",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "39d4d3bb-a8fa-42ce-bcf6-a308e275998f",
                "$connId": "con_78",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:30184",
                        "variable": "numero"
                    },
                    {
                        "$$hashKey": "object:27503",
                        "source": "intent",
                        "comparison": "notExists",
                        "values": []
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:30175"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Qual seria o número?';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao numero exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao numero",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:59241",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ProcessHttp",
                "$title": "Clean User input",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "uri": "{{config.api}}/SmallTalks/clean/{{input.content}}",
                    "method": "GET",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "numero"
                },
                "conditions": []
            },
            {
                "type": "MergeContact",
                "$title": "Update Numero",
                "$invalid": false,
                "settings": {
                    "extras": { "numero": "{{numero}}" },
                    "name": "{{contact.name}}"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET EXCEPTION IDENTIFIER",
                "$invalid": false,
                "settings": {
                    "value": "5.11",
                    "variable": "exceptionIdentifier"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:105382",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#FF1E90",
                "label": "MergeContact",
                "id": "blip-tag-86ea71d8-f490-77f7-b4e3-28a05d2a67b2",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "56da1e07-0945-417d-a2cb-b634e538f445",
        "root": false,
        "$title": "C.1.11 - Solicita número",
        "$position": { "top": "476px", "left": "2044px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "39d4d3bb-a8fa-42ce-bcf6-a308e275998f": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "5f691ec6-6c34-4e1d-8c9e-5a9152bd19ce",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "5f691ec6-6c34-4e1d-8c9e-5a9152bd19ce",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:31427"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "692d5c83-467f-43af-b5d0-49d1deea107d",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "692d5c83-467f-43af-b5d0-49d1deea107d",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:31428"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "50127ee2-961c-49ac-bf17-2792bef80763",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:31111",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "12424a9f-0f7c-412b-bdfb-fe789b90b245",
                "$connId": "con_83",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:31884",
                        "variable": "complemento"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:31875"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "TrackEvent",
                "$title": "Solicitacao complemento",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao complemento",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:67969",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            },
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Ok, estamos quase acabando! Caso tenha {{boldTags@open}}complemento{{boldTags@close}}, me informe, por gentileza';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ProcessHttp",
                "$title": "Clean User Input",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "GET",
                    "uri": "{{config.api}}/SmallTalks/clean/{{input.content}}",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "complemento"
                },
                "conditions": []
            },
            {
                "type": "MergeContact",
                "$title": "Update Complemento",
                "$invalid": false,
                "settings": {
                    "extras": { "complemento": "{{complemento}}" },
                    "name": "{{contact.name}}"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET EXCEPTION IDENTIFIER",
                "$invalid": false,
                "settings": {
                    "value": "3.1",
                    "variable": "exceptionIdentifier"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:107815",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#FF1E90",
                "label": "MergeContact",
                "id": "blip-tag-86ea71d8-f490-77f7-b4e3-28a05d2a67b2",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "39d4d3bb-a8fa-42ce-bcf6-a308e275998f",
        "root": false,
        "$title": "C.1.12 - Solicita Complemento",
        "$position": { "top": "639px", "left": "2044px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "fcb2f3fd-3498-4d67-9280-eff889522979": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "a587d845-399f-403e-9c0c-441313edbb6d",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "a587d845-399f-403e-9c0c-441313edbb6d",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:90170"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "38180f40-bed6-43d7-bda5-0f84ea595002",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "38180f40-bed6-43d7-bda5-0f84ea595002",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:90171"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "26722396-4b5b-4dbc-9ee3-a718aded758a",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:39279",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "a8b2b52a-9e25-47bd-a0a7-4eafc12f0cbd",
                "$connId": "con_5996",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "equals",
                        "values": ["sim", "confirmo", "ok", "Isso mesmo"],
                        "$$hashKey": "object:9985"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:9977"
            },
            {
                "stateId": "a8b2b52a-9e25-47bd-a0a7-4eafc12f0cbd",
                "$connId": "con_6001",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Confirmation", "Consent"],
                        "$$hashKey": "object:42044",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:42035"
            },
            {
                "stateId": "d362641b-7610-45c8-9227-ca1419c252a8",
                "$connId": "con_98",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Disagreement", "Negation", "Confusion"],
                        "$$hashKey": "object:47024",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:47016"
            },
            {
                "stateId": "b831ad24-b74b-4d38-9720-96d51d9d2aab",
                "$connId": "con_103",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Cep enviado"],
                        "$$hashKey": "object:54861",
                        "variable": "localChange"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:54853"
            },
            {
                "stateId": "65ebced0-76be-48b6-854c-49e8299ecbcf",
                "$connId": "con_108",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Bairro", "Cidade", "Estado", "Tudo"],
                        "$$hashKey": "object:56713",
                        "variable": "localChange"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:56705"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object();\n\n    const cidade = \"{{contact.extras.cidade}}\".replace(/[`~!@#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/gi, '');\n    const estado = \"{{contact.extras.estado}}\".replace(/[`~!@#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/gi, '');\n    const bairro = \"{{contact.extras.bairro}}\".replace(/[`~!@#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/gi, '');\n\n    contentCard.msg = 'Prontinho, veja o que eu anotei:\\n\\n' +\n        '{{boldTags@open}}1.Bairro:{{boldTags@close}} ' + bairro + '\\n{{boldTags@open}}2.Cidade:{{boldTags@close}} '+ cidade + '\\n{{boldTags@open}}3.Estado:{{boldTags@close}} '+ estado +\n        '\\n\\n{{boldTags@open}}É isso mesmo? Se não for é só me falar o que você quer editar ou me passar o CEP.{{boldTags@close}}';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n    \n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = decodeURI(card.msg);\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao dados endereco exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados endereco exibicao",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:87748",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ProcessHttp",
                "$title": "Get Intention",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "GET",
                    "uri": "{{config.api}}/SmallTalks/intention?userInput={{input.content}}",
                    "responseStatusVariable": "StatusResponse",
                    "responseBodyVariable": "intention"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Track Alteracao Endereco",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "//Input: input.content\n//Output: validInput\n\nfunction run(input) {\n    let removeDigits = /\\d+/;\n    let aux;\n    const invalid = \"Input inesperado\";\n    \n    try{\n        if(removeDigits.test(input)){\n            aux = input.replace(/\\D/g,'');\n            if(aux.length == 8){\n                return \"Cep enviado\";\n            }\n        }\n\n        const optionsRegex = {\n            \"(1|^um|bairr)\": \"Bairro\",\n            \"(2|^dois|cidad)\": \"Cidade\",\n            \"(3|^tr(ê|e)s|estad)\": \"Estado\",\n            \"(tudo|tod(o|a)s?)\": \"Tudo\"\n            \n        };\n\n        for(let key in optionsRegex) {\n\n            if(optionsRegex.hasOwnProperty(key)) {\n                const matching = new RegExp(key, \"i\");\n\n                if(matching.test(input)) {\n                    return optionsRegex[key];\n                }\n            }\n        }\n    }catch(e){\n        return invalid;\n    }\n    return invalid;\n}",
                    "inputVariables": ["input.content"],
                    "outputVariable": "localChange"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao dados endereco selecao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados endereco selecao",
                    "action": "Endereco correto"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:44535",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Confirmation", "Consent"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao dados endereco selecao nao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados endereco selecao",
                    "action": "Endereco incorreto"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:45669",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Confusion", "Disagreement", "Negation"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao dados endereco selecao Inesperado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados endereco selecao",
                    "action": "input inesperado"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:16304",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confirmation"]
                    },
                    {
                        "$$hashKey": "object:18065",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Consent"]
                    },
                    {
                        "$$hashKey": "object:19147",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Disagreement"]
                    },
                    {
                        "$$hashKey": "object:21016",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Negation"]
                    },
                    {
                        "$$hashKey": "object:22060",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confusion"]
                    },
                    {
                        "$$hashKey": "object:38734",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "localChange",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado confirmacao dados endereco",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado confirmacao dados endereco",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:49910",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confusion"]
                    },
                    {
                        "$$hashKey": "object:12030",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Disagreement"]
                    },
                    {
                        "$$hashKey": "object:13072",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Negation"]
                    },
                    {
                        "$$hashKey": "object:14118",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confirmation"]
                    },
                    {
                        "$$hashKey": "object:15162",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Consent"]
                    },
                    {
                        "$$hashKey": "object:40278",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "localChange",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "CONFIRMACAO DADOS ENDERECO SELECAO LOCAL",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados endereco selecao",
                    "action": "{{localChange}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:41631",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "localChange",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET exception Identifier",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "3.3"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:114257",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "StatusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "fcb2f3fd-3498-4d67-9280-eff889522979",
        "root": false,
        "$title": "C.1.14 - Mensagem confirmação endereço",
        "$position": { "top": "1031px", "left": "1441px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "a8b2b52a-9e25-47bd-a0a7-4eafc12f0cbd": {
        "$contentActions": [
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "c50d09c3-e150-47ec-9075-163a3f86fa01",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:43212",
                "$invalid": false
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "6c06975c-781f-46fa-a3f5-cec1a33cc290",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 },
                        "metadata": {
                            "#stateName": "{{state.name}}",
                            "#stateId": "{{state.id}}",
                            "#messageId": "{{input.message@id}}"
                        }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "6c06975c-781f-46fa-a3f5-cec1a33cc290",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            },
                            "metadata": {
                                "#stateName": "{{state.name}}",
                                "#stateId": "{{state.id}}",
                                "#messageId": "{{input.message@id}}"
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:24861"
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "89381d44-8b2f-4236-b0b5-2168f58e7d0e",
                "$connId": "con_113",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["true"],
                        "$$hashKey": "object:89274",
                        "variable": "changeOnlyDateAndTime"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:89266"
            },
            {
                "stateId": "a1dfc3f5-aefc-4894-8c4b-8fc19897fc06",
                "$connId": "con_118",
                "conditions": [
                    {
                        "$$hashKey": "object:41435",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    },
                    {
                        "$$hashKey": "object:14824",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "response@mensagem",
                        "values": ["Fornecedor não encontrado."]
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:22972"
            },
            {
                "stateId": "8ce9b45c-8597-4396-8017-a9d30ff9fd8b",
                "$connId": "con_123",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["200"],
                        "$$hashKey": "object:62905",
                        "variable": "statusResponse"
                    },
                    {
                        "$$hashKey": "object:17086",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "response@mensagem",
                        "values": ["Processado com sucesso."]
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:62896"
            }
        ],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose provider Type",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "/**\n* All input variables needs to be passed as function param;\n* Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n* Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n**/\nfunction run(planJson, serviceType) {\n    var plan = JSON.parse(planJson);\n    var providerType = plan.warranty;\n\n    if(serviceType === \"pneus\" || serviceType === \"Pneus\")\n    {\n        providerType = \"pneu\";\n    }\n    \n    return providerType; //Return value will be saved as \"Return value variable\" field name\n}",
                    "inputVariables": [
                        "contact.extras.planJson",
                        "contact.extras.serviceType"
                    ],
                    "outputVariable": "providerType"
                },
                "conditions": []
            },
            {
                "type": "ProcessHttp",
                "$title": "Get Fornecedor with address",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "POST",
                    "body": "{\n    \"cep\": \"\",\n    \"coordenada\": {\n        \"latitude\": \"\",\n        \"longitude\": \"\"\n    },\n    \"endereco\": {\n        \"estado\": \"{{contact.extras.estado}}\",\n        \"cidade\": \"{{contact.extras.cidade}}\",\n        \"bairro\": \"{{contact.extras.bairro}}\",\n        \"logradouro\": \"\",\n        \"complemento\": \"\",\n        \"cep\": \"\"\n    },\n    \"marca\": \"{{contact.extras.clientJson@brand}}\",\n    \"tipoFornecedor\": \"{{context.providerType}}\"\n}",
                    "uri": "{{config.api}}/Provider/find",
                    "responseBodyVariable": "response",
                    "responseStatusVariable": "statusResponse"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:21845",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "useCoordinate",
                        "values": ["false"]
                    },
                    {
                        "$$hashKey": "object:33251",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "changeOnlyDateAndTime",
                        "values": ["false"]
                    }
                ]
            },
            {
                "type": "ProcessHttp",
                "$title": "GET Fornecedor with coordinate",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "POST",
                    "body": "{\n    \"cep\": \"\",\n    \"coordenada\": {\n        \"latitude\": \"{{contact.extras.latitude}}\",\n        \"longitude\": \"{{contact.extras.longitude}}\"\n    },\n    \"endereco\": {\n        \"estado\": \"\",\n        \"cidade\": \"\",\n        \"bairro\": \"\",\n        \"logradouro\": \"\",\n        \"complemento\": \"\",\n        \"cep\": \"\"\n    },\n    \"marca\": \"{{contact.extras.clientJson@brand}}\",\n    \"tipoFornecedor\": \"{{context.providerType}}\"\n}",
                    "uri": "{{config.api}}/Provider/find",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "response"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:25021",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "useCoordinate",
                        "values": ["true"]
                    },
                    {
                        "$$hashKey": "object:34378",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "changeOnlyDateAndTime",
                        "values": ["false"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET DISTANCIA FORNECEDOR",
                "$invalid": false,
                "settings": {
                    "value": "{{response@fornecedor.distancia}}",
                    "variable": "distanciaFornecedor",
                    "expiration": 10
                },
                "conditions": [
                    {
                        "$$hashKey": "object:16848",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    },
                    {
                        "$$hashKey": "object:14570",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "response@mensagem",
                        "values": ["Processado com sucesso."]
                    },
                    {
                        "$$hashKey": "object:36494",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "changeOnlyDateAndTime",
                        "values": ["false"]
                    }
                ]
            },
            {
                "type": "ExecuteScript",
                "$title": "Check is Inside Radius",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(distance, maxDistance) {\n                let distanceInt = parseInt(distance);\n                let maxDistanceInt = parseInt(maxDistance);\n\n                return distanceInt <= maxDistanceInt; //Return value will be saved as \"Return value variable\" field name\n            }",
                    "inputVariables": [
                        "context.distanciaFornecedor",
                        "config.maxRadius"
                    ],
                    "outputVariable": "isInsideRadius"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:15897",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    },
                    {
                        "$$hashKey": "object:17716",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "response@mensagem",
                        "values": ["Processado com sucesso."]
                    },
                    {
                        "$$hashKey": "object:37751",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "changeOnlyDateAndTime",
                        "values": ["false"]
                    }
                ]
            },
            {
                "type": "ExecuteScript",
                "$title": "Create New Schedule",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(responseJson, schedulesJson, km, scheduleDetails, email, client, plate, plan, serviceType, requestedService) {\n    var schedules = JSON.parse(schedulesJson);\n    var response = JSON.parse(responseJson);\n\n    var detailsWithoutSpecial = \"\";\n    if(scheduleDetails){\n        detailsWithoutSpecial = scheduleDetails.replace(/[^\\w\\s]/gi, '-');\n    }\n    \n    var schedule = {\n        client: client,\n        provider: response.fornecedor,\n        plan: plan,\n        plate: plate,\n        km: km,\n        details: detailsWithoutSpecial,\n        email: email,\n        serviceType: serviceType,\n        menuProcess: requestedService\n    };\n\n    let lastIndex = schedules.length - 1;\n    if(lastIndex < 0){\n        schedules.push(schedule);\n    }\n    else\n    {\n        if(typeof schedules[lastIndex].protocol === 'undefined')\n        {\n            schedules[lastIndex] = schedule;\n        }\n        else {\n            schedules.push(schedule);\n        }    \n    }\n\n    return schedules;\n}",
                    "inputVariables": [
                        "context.response",
                        "context.schedules",
                        "context.km",
                        "context.scheduleDetails",
                        "contact.email",
                        "contact.extras.clientJson",
                        "contact.extras.plate",
                        "contact.extras.planJson",
                        "contact.extras.serviceType",
                        "context.requestedService"
                    ],
                    "outputVariable": "schedules"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:31695",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    },
                    {
                        "$$hashKey": "object:19318",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "response@mensagem",
                        "values": ["Processado com sucesso."]
                    },
                    {
                        "$$hashKey": "object:24933",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "reSchedule",
                        "values": ["false"]
                    }
                ]
            },
            {
                "type": "ExecuteScript",
                "$title": "Enable ReSchedule",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "// extras.schedules | context.schedule\nfunction run(schedulesJson, reScheduleJson, responseJson) {\n    var schedules = JSON.parse(schedulesJson);\n    var reSchedule = JSON.parse(reScheduleJson);\n    var response = JSON.parse(responseJson);\n\n    var option;\n    schedules.forEach(function(item, index){\n        if(item.protocol === reSchedule.protocol){\n            option = index;\n        }\n    });\n\n    if (option >= 0) {\n        schedules.splice(option, 1);\n        reSchedule.provider = response.fornecedor;\n        reSchedule.Confirmed = false;\n        reSchedule.viewed = false;\n        schedules.push(reSchedule);\n    }\n    \n    return schedules;\n}\n\n\n",
                    "inputVariables": [
                        "context.schedules",
                        "context.schedule",
                        "response"
                    ],
                    "outputVariable": "schedules"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:181550",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "reSchedule",
                        "values": ["true"]
                    },
                    {
                        "$$hashKey": "object:41194",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "response@mensagem",
                        "values": ["Processado com sucesso."]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "LeasePlan"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET EXCEPTION IDENTIFIER",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "a8b2b52a-9e25-47bd-a0a7-4eafc12f0cbd",
        "root": false,
        "$title": "C.1.16 - Busca Fornecedor",
        "$position": { "top": "980px", "left": "1111px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "d362641b-7610-45c8-9227-ca1419c252a8": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "1f2a062c-a3c5-4e61-96b5-ced50273cbd4",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "1f2a062c-a3c5-4e61-96b5-ced50273cbd4",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:48365"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "baa1eb38-7871-452e-a2f4-0606ee60591b",
                        "type": "text/plain",
                        "content": "Sem problemas, vou pegar as informações novamente"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "baa1eb38-7871-452e-a2f4-0606ee60591b",
                            "type": "text/plain",
                            "content": "Sem problemas, vou pegar as informações novamente"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:48366"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "87f5f8a3-6c65-4611-b0b5-f4bef76fe95c",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:48049",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [
            {
                "type": "TrackEvent",
                "$title": "Menu alteracao dados origem",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Menu alteracao dados origem",
                    "action": "{{context.flOrigem}}"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Menu alteracao dados exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Menu alteracao dados exibicao",
                    "action": "exibicao"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": {
            "stateId": "6764602f-578d-47b6-bd68-4da1482539be",
            "$invalid": false
        },
        "id": "d362641b-7610-45c8-9227-ca1419c252a8",
        "root": false,
        "$title": "C.1.15 - Retorno Inicio Cadastro",
        "$position": { "top": "1045px", "left": "1741px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "8ce9b45c-8597-4396-8017-a9d30ff9fd8b": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "57607dda-6b6e-4f26-a941-1ac0fb8dfc73",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "57607dda-6b6e-4f26-a941-1ac0fb8dfc73",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:55227"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "50f2f99a-0335-4897-931b-8c90586c30f2",
                        "type": "text/plain",
                        "content": "{{msgConfirmFornecedor}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "50f2f99a-0335-4897-931b-8c90586c30f2",
                            "type": "text/plain",
                            "content": "{{msgConfirmFornecedor}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:55228"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "a40b3e2a-23e8-4767-b14f-c92958863d22",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "a40b3e2a-23e8-4767-b14f-c92958863d22",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:80719"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "47225930-4c36-4427-8a6c-f97cf4913ab5",
                        "type": "text/plain",
                        "content": "{{boldTags@open}}{{context.provider@nomeFantasia}}{{boldTags@close}}\n{{context.provider@telefone}}\n{{context.provider@endereco.logradouro}}, {{context.provider@endereco.complemento}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "47225930-4c36-4427-8a6c-f97cf4913ab5",
                            "type": "text/plain",
                            "content": "{{boldTags@open}}{{context.provider@nomeFantasia}}{{boldTags@close}}\n{{context.provider@telefone}}\n{{context.provider@endereco.logradouro}}, {{context.provider@endereco.complemento}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:80720"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "a2937568-6f42-4f98-b6cc-6684a1783bc2",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:64108",
                "$invalid": false
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "49995ace-e633-4df9-ac0b-97a0e88fb79d",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 },
                        "metadata": {
                            "#stateName": "{{state.name}}",
                            "#stateId": "{{state.id}}",
                            "#messageId": "{{input.message@id}}"
                        }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "49995ace-e633-4df9-ac0b-97a0e88fb79d",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            },
                            "metadata": {
                                "#stateName": "{{state.name}}",
                                "#stateId": "{{state.id}}",
                                "#messageId": "{{input.message@id}}"
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:33171"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "9c12a459-7673-4648-8e07-e6687fe15a51",
                        "type": "application/vnd.lime.location+json",
                        "content": {
                            "latitude": "{{context.provider@latitude}}",
                            "longitude": "{{context.provider@longitude}}",
                            "altitude": 853,
                            "text": ""
                        },
                        "metadata": {
                            "#stateName": "{{state.name}}",
                            "#stateId": "{{state.id}}",
                            "#messageId": "{{input.message@id}}"
                        }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "9c12a459-7673-4648-8e07-e6687fe15a51",
                            "type": "application/vnd.lime.location+json",
                            "content": {
                                "latitude": "{{context.provider@latitude}}",
                                "longitude": "{{context.provider@longitude}}",
                                "altitude": 853,
                                "text": ""
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:17191"
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "7c00e6ef-e981-4c57-8d11-f86189e2e348",
                "$connId": "con_128",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:11397"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:11378"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "/**\n* All input variables needs to be passed as function param;\n* Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n* Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n**/\nfunction run(isInsideRadius) {\n    let msg;\n\n    if(isInsideRadius == \"True\")\n    {\n        msg = 'Ótimo, tudo registrado!\\n\\nInclusive, já consultei meu sistema e encontrei o melhor fornecedor para seu atendimento:';\n    }\n    else {\n        msg = 'Ok, tudo registrado!\\n\\nDe acordo com a sua região, encontramos este fornecedor para atendimento mais próximo:';\n    }\n\n    return msg; //Return value will be saved as \"Return value variable\" field name\n}",
                    "inputVariables": ["context.isInsideRadius"],
                    "outputVariable": "msgConfirmFornecedor"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Verificacao endereco api dentro do raio",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Verificacao endereco api",
                    "action": "dentro do raio"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:56768",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Verificacao endereco api fora do raio",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Verificacao endereco api",
                    "action": "fora do raio"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:57872",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"]
                    }
                ]
            },
            {
                "type": "ExecuteScript",
                "$title": "Get Provider",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(schedulesJson) {\n    var schedules = JSON.parse(schedulesJson);\n    var lastIndex = schedules.length - 1;\n\n    var provider = schedules[lastIndex].provider;\n    if(!provider.telefone)\n    {\n        provider.telefone = \"Sem telefone cadastro\";\n    }\n\n    if(!provider.endereco.logradouro){\n        provider.endereco.logradouro = \"Endereço não cadastrado\";\n    }\n    if(!provider.endereco.complemento){\n        provider.endereco.complemento = \"\";\n    }\n    \n    return provider;\n}",
                    "inputVariables": ["context.schedules"],
                    "outputVariable": "provider"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "TrackEvent",
                "$title": "Exibição Fornecedor Próximo",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Exibicao fornecedor proximo {{requestedService}}",
                    "action": "{{context.provider@cnpj}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:38956",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "isInsideRadius",
                        "values": ["true"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Exibição Fornecedor Distante",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Exibicao fornecedor distante {{requestedService}}",
                    "action": "{{context.provider@cnpj}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:40294",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "isInsideRadius",
                        "values": ["true"]
                    }
                ]
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "8ce9b45c-8597-4396-8017-a9d30ff9fd8b",
        "root": false,
        "$title": "C.1.17 - Exibir Fornecedor",
        "$position": { "top": "1211px", "left": "1124px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "7c00e6ef-e981-4c57-8d11-f86189e2e348": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "1b34efc3-5ab8-468a-8a0f-60b95f7b1ad2",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "1b34efc3-5ab8-468a-8a0f-60b95f7b1ad2",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:81663"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "808eb51d-71ed-4d7a-a6ea-20ab6c1df4a7",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "808eb51d-71ed-4d7a-a6ea-20ab6c1df4a7",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:81664"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "c80bd326-1fc6-4759-88b6-288885a3beef",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:81347",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "80a06601-5ca3-4117-91aa-aec63c2ff8e4",
                "$connId": "con_133",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:86467"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:86458"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "\nfunction run(isInsideRadius, exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.isVisible = true;\n\n    if(isInsideRadius === \"true\")\n    {\n        contentCard.msg = \"Antes de prosseguir com o dia e horário, só preciso que me confirme se está tudo certo até aqui.\\n{{boldTags@open}}Confirma{{boldTags@close}} as informações do fornecedor?\";\n    }\n    else {\n        contentCard.msg = \"Você deseja {{boldTags@open}}manter{{boldTags@close}} este fornecedor ou gostaria de {{boldTags@open}}verificar outro{{boldTags@close}}?\\n\\n{{boldTags@open}}1{{boldTags@close}}. Aceitar este fornecedor\\n{{boldTags@open}}2{{boldTags@close}}. Verificar outro fornecedor\\n{{boldTags@open}}3{{boldTags@close}}. Falar com a central telefônica\\n{{boldTags@open}}4{{boldTags@close}}. Finalizar/Sair\";\n    }\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": [
                        "context.isInsideRadius",
                        "exceptionReturn"
                    ],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmcacao endereco proximo exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao endereco proximo exibicao",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:62386",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"]
                    },
                    {
                        "$$hashKey": "object:10458",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Configuracao endereco distante exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao endereco distante exibicao",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:63560",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"]
                    },
                    {
                        "$$hashKey": "object:11683",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Reset Intention",
                "$invalid": false,
                "settings": { "variable": "intention", "value": "empty" },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "Save Radius Context",
                "$invalid": false,
                "settings": {
                    "variable": "radiusCheck",
                    "value": "{{context.isInsideRadius}}"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ProcessHttp",
                "$title": "Get Intention",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "uri": "{{config.api}}/SmallTalks/intention?userInput={{input.content}}",
                    "method": "GET",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "intention"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:8653",
                        "source": "input",
                        "comparison": "notEquals",
                        "values": ["1", "2"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Set Exception Identifier",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "3.5"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:118701",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "7c00e6ef-e981-4c57-8d11-f86189e2e348",
        "root": false,
        "$title": "C.1.20 - Confirma fornecedor",
        "$position": { "top": "1700px", "left": "1262px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "5f3b86a2-a454-44ff-8e9d-0294a2c07a55": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "52387498-9265-44d0-a5a4-40537709f792",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "52387498-9265-44d0-a5a4-40537709f792",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:22181"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "461be6bc-dbb4-4396-98d1-b36a23a8b6c1",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "461be6bc-dbb4-4396-98d1-b36a23a8b6c1",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:22182"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "87532f2a-4424-4d75-8b2c-62b17d67fdf3",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:71481",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "6b297162-df45-441b-ba88-dd84a9abaa2d",
                "$connId": "con_138",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Input inesperado"],
                        "$$hashKey": "object:48808",
                        "variable": "inputDate"
                    },
                    {
                        "$$hashKey": "object:48840",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusUserDate",
                        "values": ["inferior 48"]
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:48800"
            },
            {
                "stateId": "64f364ac-8576-4d6b-8521-f997bb6e81df",
                "$connId": "con_143",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Input inesperado"],
                        "$$hashKey": "object:52273",
                        "variable": "inputDate"
                    },
                    {
                        "$$hashKey": "object:53276",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contact.extras.serviceType",
                        "values": ["Pneus"]
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:52265"
            },
            {
                "stateId": "4cd6fa44-e389-4f30-9976-a2b8fab5db2e",
                "$connId": "con_148",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Input inesperado"],
                        "$$hashKey": "object:55678",
                        "variable": "inputDate"
                    },
                    {
                        "$$hashKey": "object:25076",
                        "source": "context",
                        "comparison": "equals",
                        "values": ["valid"],
                        "variable": "statusUserDate"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:55670"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Por favor, digite a {{boldTags@open}}data{{boldTags@close}} de sua preferência.\\n\\\nConforme o exemplo: {{boldTags@open}}dd/mm/yyyy{{boldTags@close}} utilizando as barras.';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao data agendamento exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao data agendamento exibicao",
                    "action": "exibicao"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao data agendamento origem",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao data agendamento origem",
                    "action": "{{context.flOrigem}}"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "Reset statusUserDate",
                "$invalid": false,
                "settings": { "variable": "statusUserDate", "value": "empty" },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "MATCH DATE",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function getDate(date, monthAdd){\n    const numberPattern = /\\d+/g;\n    const separator = RegExp(\"(\\\\|+|\\\\s+|-+|\\\\.+|/)\");\n    var datePattern = RegExp(\"[0-9]+\" + \"(\\\\|+|\\\\s+|-+|\\\\.+|/)\" + \"[0-9]+\" + \"(\\\\|+|\\\\s+|-+|\\\\.+|/)\" + \"[0-9]+\");\n    const removeTwoDigits = RegExp(\"^[0-9]{2}\"); \n    const removeOneDigit = RegExp(\"^[0-9]{1}\"); \n    const invalid = \"Input inesperado\";\n    const error = \"Error\";\n    var numbers;\n    var aux;\n    var year;\n    var month;\n    var day;\n    \n    try{\n        if(monthAdd != null){\n            month = monthAdd;\n            numbers = date.match(numberPattern);\n            aux = \"\";\n            for(var i=0; i < numbers.length; i++){\n                aux += numbers[i];\n            }\n\n            if(aux.length == 3 || aux.length == 5){\n                day = \"0\";\n                day += aux.match(removeOneDigit)[0];\n                aux = aux.replace(removeOneDigit, \"\");\n                year = aux;\n            }else if(aux.length == 4 || aux.length == 6){\n                day = aux.match(removeTwoDigits)[0];\n                aux = aux.replace(removeTwoDigits, \"\");\n                year = aux;\n            }\n        }else if(datePattern.test(date)){\n            aux = date.match(datePattern)[0];\n            day = aux.split(separator)[0];\n            month = aux.split(separator)[2];\n            year = aux.split(separator)[4];\n        }else{\n            return invalid;\n        }\n\n        if(day != null && month != null && year != null){\n            if(year.length == 2 || year.length == 4){\n                if(day.length != 2 || month.length != 2 || year.length != 4){\n                    if(day.length == 1){\n                        day = \"0\" + day;\n                    }\n                    if(month.length == 1){\n                        month = \"0\" + month;\n                    }\n                    if(year.length == 2){\n                        year = \"20\" + year;\n                    }\n                }\n            }else{\n                return invalid;\n            }\n\n            return day + \"/\" + month + \"/\" + year;\n        }                    \n    }catch(e){\n        return error;\n    }    \n    return invalid;\n}\n\n\nfunction run(input){\n    var numberPattern = /\\d+/g;\n    var valid = false;\n    const invalid = \"Input inesperado\";\n    const error = \"Error \";\n    var date = invalid;\n    var aux;\n\n    const optionsRegex = {\n        \"(janeiro|jan)\": \"01\",\n        \"(fevereiro|fev)\": \"02\",\n        \"(marco|março|mar)\": \"03\",\n        \"(abril|abr)\": \"04\",\n        \"(maio|mai)\": \"05\",\n        \"(junho|jun)\": \"06\",\n        \"(julho|jul)\": \"07\",\n        \"(agosto|ago)\": \"08\",\n        \"(setembro|set)\": \"09\",\n        \"(outubro|out)\": \"10\",\n        \"(novembro|nov)\": \"11\",\n        \"(dezembro|dez)\": \"12\",\n        \n    };\n\n    if(numberPattern.test(input) === true){       \n        for(var key in optionsRegex) {\n            if(optionsRegex.hasOwnProperty(key)) {\n                const matching = new RegExp(key, \"i\");\n\n                if(matching.test(input)) {\n                    aux = getDate(input, optionsRegex[key]);\n                    if(aux != invalid && aux != error){\n                        valid = true;\n                        date = aux;\n                    }\n                }\n            }\n        }\n        if(valid == false){\n            date = getDate(input, null);\n        }\n    }\n        \n    return  date;\n}\n",
                    "inputVariables": ["input.content"],
                    "outputVariable": "inputDate"
                },
                "conditions": []
            },
            {
                "type": "ProcessHttp",
                "$title": "Check Date",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "POST",
                    "uri": "{{config.api}}/Validate/isValidDate",
                    "responseBodyVariable": "statusUserDate",
                    "responseStatusVariable": "statusResponse",
                    "body": "\"{{inputDate}}\""
                },
                "conditions": [
                    {
                        "$$hashKey": "object:65201",
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Input inesperado"],
                        "variable": "inputDate"
                    }
                ]
            },
            {
                "type": "ExecuteScript",
                "$title": "Save First Date",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(schedulesJson, firstDate) {\n    var schedules = JSON.parse(schedulesJson);\n    var lastIndex = schedules.length - 1;\n    schedules[lastIndex].firstDate = firstDate;\n    schedules[lastIndex].secondDate = firstDate;\n    schedules[lastIndex].hour = \"8:00:00\";\n\n    return schedules;\n}",
                    "inputVariables": ["context.schedules", "inputDate"],
                    "outputVariable": "schedules"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:27900",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    },
                    {
                        "$$hashKey": "object:64270",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusUserDate",
                        "values": ["valid", "inferior 48"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao data agendamento inferior",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao data agendamento selecao",
                    "action": "data inferior a atual"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:25648",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusUserDate",
                        "values": ["inferior"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao data agendamento inferior 48",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao data agendamento selecao",
                    "action": "inferior 48"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:26832",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusUserDate",
                        "values": ["inferior 48"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao data agendamento selecao inesperado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao data agendamento selecao",
                    "action": "input inesperado"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:28841",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado data agendamento",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado data agendamento",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:30440",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Save Context firstDate",
                "$invalid": false,
                "settings": {
                    "variable": "firstDate",
                    "value": "{{inputDate}}",
                    "expiration": null
                },
                "conditions": [
                    {
                        "$$hashKey": "object:41054",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Set SecondDate",
                "$invalid": false,
                "settings": {
                    "value": "{{input.content}}",
                    "variable": "secondDate"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:32716",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Set hours context",
                "$invalid": false,
                "settings": { "variable": "hours", "value": "08:00:00" },
                "conditions": [
                    {
                        "$$hashKey": "object:35246",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Set Invalid Date exception",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "5.4"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:19566",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Set Exception Past Date",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "5.12"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:20750",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    },
                    {
                        "$$hashKey": "object:24019",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusUserDate",
                        "values": ["inferior"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:126190",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    },
                    {
                        "$$hashKey": "object:137599",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Celula Mike"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "5f3b86a2-a454-44ff-8e9d-0294a2c07a55",
        "root": false,
        "$title": "C.1.22 - Mensagem Primeira Data",
        "$position": { "top": "2089px", "left": "1064px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "b7c20e52-912b-46cc-b215-36fb34b6d56f": {
        "$contentActions": [
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "f72aa749-2bce-4ceb-826b-fe22a102466c",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:21660",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "b7c20e52-912b-46cc-b215-36fb34b6d56f",
        "root": false,
        "$title": "Redireciona para N.3.3",
        "$position": { "top": "1552px", "left": "991px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "6b297162-df45-441b-ba88-dd84a9abaa2d": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "79986a63-0d04-4c32-95fc-52da5fadfff0",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "79986a63-0d04-4c32-95fc-52da5fadfff0",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:39082"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "18882c73-7f1a-4626-90b9-026807cfe77d",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "18882c73-7f1a-4626-90b9-026807cfe77d",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:39083"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "cae8aadd-eb1c-4f09-9974-01965f004a42",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:51396",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "fde080c4-1b76-4842-8dae-340c9882fc88",
                "$connId": "con_153",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Disagreement", "Negation", "Confusion"],
                        "$$hashKey": "object:19180",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:19171"
            },
            {
                "stateId": "64f364ac-8576-4d6b-8521-f997bb6e81df",
                "$connId": "con_158",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Pneus"],
                        "$$hashKey": "object:21620",
                        "variable": "contact.extras.serviceType"
                    },
                    {
                        "$$hashKey": "object:22294",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Confirmation", "Consent"]
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:21612"
            },
            {
                "stateId": "4cd6fa44-e389-4f30-9976-a2b8fab5db2e",
                "$connId": "con_163",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Confirmation", "Consent"],
                        "$$hashKey": "object:23385",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:23377"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "SetVariable",
                "$title": "Reset intention",
                "$invalid": false,
                "settings": { "variable": "intention", "value": "empty" },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Hum... 🤔 essa data não tem 48 horas de antecedência.\\n\\\nPosso tentar prosseguir mas não garanto o sucesso do agendamento.\\n\\\n\\n\\\nQuer continuar mesmo assim?';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ProcessHttp",
                "$title": "Get Intention",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "GET",
                    "uri": "{{config.api}}/SmallTalks/intention?userInput={{input.content}}",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "intention"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmação Data Agendamento - Sim",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao data agendamento antes 48 selecao",
                    "action": "Sim"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:29683",
                        "source": "context",
                        "variable": "intention",
                        "comparison": "equals",
                        "values": ["Confirmation", "Consent"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmação Data Agendamento - Não",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao data agendamento antes 48 selecao",
                    "action": "Nao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:31245",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Disagreement", "Negation"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmação Data agendamento - Input Inesperado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao data agendamento antes 48 selecao",
                    "action": "Input inesperado"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:32834",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": [
                            "Confirmation",
                            "Consent",
                            "Disagreement",
                            "Negation"
                        ]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado data confirmacao agendamento antes 48",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado data confirmacao agendamento antes 48",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:29518",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Negation"]
                    },
                    {
                        "$$hashKey": "object:64410",
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Disagreement"],
                        "variable": "intention"
                    },
                    {
                        "$$hashKey": "object:66454",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confusion"]
                    },
                    {
                        "$$hashKey": "object:67498",
                        "source": "context",
                        "variable": "intention",
                        "comparison": "notEquals",
                        "values": ["Confirmation"]
                    },
                    {
                        "$$hashKey": "object:68522",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Consent"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET exception Identifier",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "3.5"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:130727",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "6b297162-df45-441b-ba88-dd84a9abaa2d",
        "root": false,
        "$title": "C.1.23 - Mensagem Confirma Data inf. 48h",
        "$position": { "top": "2171px", "left": "826px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "64f364ac-8576-4d6b-8521-f997bb6e81df": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "fb42e4d9-bc92-4f34-9619-809ff0e9171e",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "fb42e4d9-bc92-4f34-9619-809ff0e9171e",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:30245"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "a810e722-5cb0-45d4-a53d-99cfd05e4de2",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "a810e722-5cb0-45d4-a53d-99cfd05e4de2",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:30246"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "974907bb-9054-4dee-a7ee-79af4b4dc01a",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:52369",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "93dec74f-10ae-42b8-888b-8928b51d6644",
                "$connId": "con_168",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Consent", "Confirmation"],
                        "$$hashKey": "object:33066",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:33057"
            },
            {
                "stateId": "e21c80c5-1c62-4a21-9c08-bfc77ccb2087",
                "$connId": "con_173",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Negation", "Disagreement"],
                        "$$hashKey": "object:35373",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:35365"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Ok, veja se eu anotei corretamente:\\n\\\n{{boldTags@open}}{{context.firstDate}}{{boldTags@close}}\\n\\\n\\n\\\n{{boldTags@open}}Confirma{{boldTags@close}} essa data?';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao dados agendamento pneu exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados agendamento pneu exibicao",
                    "action": "exibicao"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ProcessHttp",
                "$title": "Get intention",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "GET",
                    "uri": "{{config.api}}/SmallTalks/intention?userInput={{input.content}}",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "intention"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao dados agendamento pneu selecao sim",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados agendamento pneu selecao",
                    "action": "sim"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:36444",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Confirmation", "Consent"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao dados agendamento pneu selecao nao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados agendamento pneu selecao",
                    "action": "nao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:37809",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Negation", "Disagreement"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao dados agendamento pneu selecao inesperado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados agendamento pneu selecao",
                    "action": "input inesperado"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:38849",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Disagreement"]
                    },
                    {
                        "$$hashKey": "object:9167",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Negation"]
                    },
                    {
                        "$$hashKey": "object:11319",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Consent"]
                    },
                    {
                        "$$hashKey": "object:12360",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confirmation"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado preenchimento dados agendamento pneu",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado preenchimento dados agendamento pneu",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:39901",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Disagreement"]
                    },
                    {
                        "$$hashKey": "object:14318",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Negation"]
                    },
                    {
                        "$$hashKey": "object:15377",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Consent"]
                    },
                    {
                        "$$hashKey": "object:16436",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confirmation"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET exception Identifier",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "3.5"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "value": "2.3",
                    "variable": "exceptionIdentifier"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:128039",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "64f364ac-8576-4d6b-8521-f997bb6e81df",
        "root": false,
        "$title": "C.1.36 - Mensagem confirmação primeira data",
        "$position": { "top": "2161px", "left": "1357px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "4cd6fa44-e389-4f30-9976-a2b8fab5db2e": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "fefb368e-640f-48e9-b1b0-9c3c5e399042",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "fefb368e-640f-48e9-b1b0-9c3c5e399042",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:43964"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "4fdb11bf-0be2-4422-9f07-2d89fea43189",
                        "type": "text/plain",
                        "content": "Já anotei aqui, mas caso não consiga nesse dia, preciso de uma {{boldTags@open}}segunda data{{boldTags@close}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "4fdb11bf-0be2-4422-9f07-2d89fea43189",
                            "type": "text/plain",
                            "content": "Já anotei aqui, mas caso não consiga nesse dia, preciso de uma {{boldTags@open}}segunda data{{boldTags@close}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:43965"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "c13b2875-ba90-4d0d-b570-5183372448b4",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:54722",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "2e0f0128-59c9-42e1-9112-5cf19b94f3e0",
                "$connId": "con_178",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:46438"
                    }
                ],
                "$$hashKey": "object:46429",
                "$invalid": false
            }
        ],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "4cd6fa44-e389-4f30-9976-a2b8fab5db2e",
        "root": false,
        "$title": "C.1.25 - Msg inicial segunda data",
        "$position": { "top": "2283px", "left": "1060px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "fde080c4-1b76-4842-8dae-340c9882fc88": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "40cc43d4-b376-4649-8444-ee0157827ef9",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "40cc43d4-b376-4649-8444-ee0157827ef9",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:15660"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "51ce7532-932f-435f-ab3d-11bad2e79a2a",
                        "type": "text/plain",
                        "content": "Ok, então só me dizer outra data com no mínimo 48 horas de antecedência."
                    },
                    "$cardContent": {
                        "document": {
                            "id": "51ce7532-932f-435f-ab3d-11bad2e79a2a",
                            "type": "text/plain",
                            "content": "Ok, então só me dizer outra data com no mínimo 48 horas de antecedência."
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:15661"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "cf5c3001-0908-4433-a6f8-f9e544de3ea3",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:15229",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Disable show MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run() {\n    var exceptionReturn = {showMsg: false};\n\n    return exceptionReturn;\n}",
                    "inputVariables": [],
                    "outputVariable": "exceptionIdentifier"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": {
            "stateId": "5f3b86a2-a454-44ff-8e9d-0294a2c07a55",
            "$invalid": false
        },
        "id": "fde080c4-1b76-4842-8dae-340c9882fc88",
        "root": false,
        "$title": "C.1.24 - Alterar data inferior a 48h",
        "$position": { "top": "2159px", "left": "604px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "a7492ba2-3617-45e5-ae88-964d75007e6e": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "58824ba2-ee5a-42e4-9d61-459f6d6d5a05",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "58824ba2-ee5a-42e4-9d61-459f6d6d5a05",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:16864"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "ba8eff3a-e477-4231-82c5-53e17aed53dd",
                        "type": "text/plain",
                        "content": "Vamos para data do seu agendamento.\n\nPreciso que essa data tenha no mínimo 48 horas de antecedência para que eu possa organizar tudo direitinho até lá."
                    },
                    "$cardContent": {
                        "document": {
                            "id": "ba8eff3a-e477-4231-82c5-53e17aed53dd",
                            "type": "text/plain",
                            "content": "Vamos para data do seu agendamento.\n\nPreciso que essa data tenha no mínimo 48 horas de antecedência para que eu possa organizar tudo direitinho até lá."
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:16865"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "c2ea11cf-ccfd-4944-bf10-d6abb196123d",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "c2ea11cf-ccfd-4944-bf10-d6abb196123d",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:48430"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "bc70fbe0-a5e6-43e3-b464-6b33e259b200",
                        "type": "text/plain",
                        "content": "📅 A data escolhida também {{boldTags@open}}precisa ser dia útil{{boldTags@close}}. Nossa agenda não está disponível em finais de semana e feriados"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "bc70fbe0-a5e6-43e3-b464-6b33e259b200",
                            "type": "text/plain",
                            "content": "📅 A data escolhida também {{boldTags@open}}precisa ser dia útil{{boldTags@close}}. Nossa agenda não está disponível em finais de semana e feriados"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:48431"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "8442626c-b192-4163-9f0e-dca4cd0b9637",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "8442626c-b192-4163-9f0e-dca4cd0b9637",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:26839"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "e14e0802-23b3-4ca4-aa88-ff21eaff94e6",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:16433",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "5f3b86a2-a454-44ff-8e9d-0294a2c07a55",
                "$connId": "con_183",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:16896"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:16887"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "SetVariable",
                "$title": "Reset ChangeOnlyDateAndTime",
                "$invalid": false,
                "settings": {
                    "variable": "changeOnlyDateAndTime",
                    "value": "false"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "a7492ba2-3617-45e5-ae88-964d75007e6e",
        "root": false,
        "$title": "C.1.21 - Msg inicial solicitação da data",
        "$position": { "top": "1909px", "left": "1022px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "93dec74f-10ae-42b8-888b-8928b51d6644": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "3ead7e41-7d5c-4f71-b009-a24b7e4c0bec",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "3ead7e41-7d5c-4f71-b009-a24b7e4c0bec",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:42099"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "006bbafa-0251-4f3a-92ec-855afca31aeb",
                        "type": "text/plain",
                        "content": "Anotado! No dia da parada, o atendimento é feito por ordem de chegada, ok? 😉"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "006bbafa-0251-4f3a-92ec-855afca31aeb",
                            "type": "text/plain",
                            "content": "Anotado! No dia da parada, o atendimento é feito por ordem de chegada, ok? 😉"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:42100"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "a84b5d99-f366-486a-bf3a-e1429dff37df",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:34216",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [],
        "$defaultOutput": {
            "stateId": "28ca6454-3365-4096-b6c0-71b117bfcaf7",
            "$invalid": false
        },
        "id": "93dec74f-10ae-42b8-888b-8928b51d6644",
        "root": false,
        "$title": "C.1.38 - Registra agendamento",
        "$position": { "top": "2154px", "left": "1570px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "e21c80c5-1c62-4a21-9c08-bfc77ccb2087": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "8fe7915b-16a8-4744-92d9-8d3b37e13092",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "8fe7915b-16a8-4744-92d9-8d3b37e13092",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:41349"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "cbd6cc81-2ed2-4ed2-9329-52813a302b01",
                        "type": "text/plain",
                        "content": "Sem problemas, só me passar essa informação novamente"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "cbd6cc81-2ed2-4ed2-9329-52813a302b01",
                            "type": "text/plain",
                            "content": "Sem problemas, só me passar essa informação novamente"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:41350"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "14280c7e-5ec3-4b90-8907-1e75f61128f0",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:34596",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [],
        "$defaultOutput": {
            "stateId": "5f3b86a2-a454-44ff-8e9d-0294a2c07a55",
            "$invalid": false
        },
        "id": "e21c80c5-1c62-4a21-9c08-bfc77ccb2087",
        "root": false,
        "$title": "C.1.37 - Redireciona para alterar a data",
        "$position": { "top": "2354px", "left": "1339px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "2e0f0128-59c9-42e1-9112-5cf19b94f3e0": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "ca1ed80e-40be-4f34-b6b2-faeee3572a83",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "ca1ed80e-40be-4f34-b6b2-faeee3572a83",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:58404"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "59dac67f-1719-4d50-a084-1cd30a2e384e",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "59dac67f-1719-4d50-a084-1cd30a2e384e",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:58405"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "afa764e8-0bc6-4ee2-b0cb-8cc9e1723b49",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:44051",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "5af386b7-fa85-4eec-8e9f-ef939b48681f",
                "$connId": "con_188",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Input inesperado"],
                        "$$hashKey": "object:49930",
                        "variable": "inputDate"
                    },
                    {
                        "$$hashKey": "object:49962",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusUserDate",
                        "values": ["inferior 48"]
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:49922"
            },
            {
                "stateId": "e03db662-9106-48ca-9c60-28441e7867d9",
                "$connId": "con_193",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Input inesperado"],
                        "$$hashKey": "object:60808",
                        "variable": "inputDate"
                    },
                    {
                        "$$hashKey": "object:26947",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusUserDate",
                        "values": ["valid"]
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:60800"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Por favor, digite a {{boldTags@open}}segunda data{{boldTags@close}} de sua preferência.\\n\\\nConforme o exemplo: {{boldTags@open}}dd/mm/yyyy{{boldTags@close}} utilizando as barras.';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionIdentifier"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao segunda data agendamento origem",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao segunda data agendamento origem",
                    "action": "{{context.flOrigem}}"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao segunda data agendamento exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao segunda data agendamento exibicao",
                    "action": "exibicao"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "Reset statusUserDate",
                "$invalid": false,
                "settings": { "variable": "statusUserDate", "value": "empty" },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "MATCH DATE",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function getDate(date, monthAdd){\n    const numberPattern = /\\d+/g;\n    const separator = RegExp(\"(\\\\|+|\\\\s+|-+|\\\\.+|/)\");\n    var datePattern = RegExp(\"[0-9]+\" + \"(\\\\|+|\\\\s+|-+|\\\\.+|/)\" + \"[0-9]+\" + \"(\\\\|+|\\\\s+|-+|\\\\.+|/)\" + \"[0-9]+\");\n    const removeTwoDigits = RegExp(\"^[0-9]{2}\"); \n    const removeOneDigit = RegExp(\"^[0-9]{1}\"); \n    const invalid = \"Input inesperado\";\n    const error = \"Error\";\n    var numbers;\n    var aux;\n    var year;\n    var month;\n    var day;\n    \n    try{\n        if(monthAdd != null){\n            month = monthAdd;\n            numbers = date.match(numberPattern);\n            aux = \"\";\n            for(var i=0; i < numbers.length; i++){\n                aux += numbers[i];\n            }\n\n            if(aux.length == 3 || aux.length == 5){\n                day = \"0\";\n                day += aux.match(removeOneDigit)[0];\n                aux = aux.replace(removeOneDigit, \"\");\n                year = aux;\n            }else if(aux.length == 4 || aux.length == 6){\n                day = aux.match(removeTwoDigits)[0];\n                aux = aux.replace(removeTwoDigits, \"\");\n                year = aux;\n            }\n        }else if(datePattern.test(date)){\n            aux = date.match(datePattern)[0];\n            day = aux.split(separator)[0];\n            month = aux.split(separator)[2];\n            year = aux.split(separator)[4];\n        }else{\n            return invalid;\n        }\n\n        if(day != null && month != null && year != null){\n            if(year.length == 2 || year.length == 4){\n                if(day.length != 2 || month.length != 2 || year.length != 4){\n                    if(day.length == 1){\n                        day = \"0\" + day;\n                    }\n                    if(month.length == 1){\n                        month = \"0\" + month;\n                    }\n                    if(year.length == 2){\n                        year = \"20\" + year;\n                    }\n                }\n            }else{\n                return invalid;\n            }\n\n            return day + \"/\" + month + \"/\" + year;\n        }                    \n    }catch(e){\n        return error;\n    }    \n    return invalid;\n}\n\n\nfunction run(input){\n    var numberPattern = /\\d+/g;\n    var valid = false;\n    const invalid = \"Input inesperado\";\n    const error = \"Error \";\n    var date = invalid;\n    var aux;\n\n    const optionsRegex = {\n        \"(janeiro|jan)\": \"01\",\n        \"(fevereiro|fev)\": \"02\",\n        \"(marco|março|mar)\": \"03\",\n        \"(abril|abr)\": \"04\",\n        \"(maio|mai)\": \"05\",\n        \"(junho|jun)\": \"06\",\n        \"(julho|jul)\": \"07\",\n        \"(agosto|ago)\": \"08\",\n        \"(setembro|set)\": \"09\",\n        \"(outubro|out)\": \"10\",\n        \"(novembro|nov)\": \"11\",\n        \"(dezembro|dez)\": \"12\",\n        \n    };\n\n    if(numberPattern.test(input) === true){       \n        for(var key in optionsRegex) {\n            if(optionsRegex.hasOwnProperty(key)) {\n                const matching = new RegExp(key, \"i\");\n\n                if(matching.test(input)) {\n                    aux = getDate(input, optionsRegex[key]);\n                    if(aux != invalid && aux != error){\n                        valid = true;\n                        date = aux;\n                    }\n                }\n            }\n        }\n        if(valid == false){\n            date = getDate(input, null);\n        }\n    }\n        \n    return  date;\n}",
                    "inputVariables": ["input.content"],
                    "outputVariable": "inputDate"
                },
                "conditions": []
            },
            {
                "type": "ProcessHttp",
                "$title": "Check Date",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "POST",
                    "uri": "{{config.api}}/Validate/isValidDate",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "statusUserDate",
                    "body": "\"{{inputDate}}\" "
                },
                "conditions": [
                    {
                        "$$hashKey": "object:64353",
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Input inesperado"],
                        "variable": "inputDate"
                    }
                ]
            },
            {
                "type": "ExecuteScript",
                "$title": "Save second date",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(schedulesJson, secondDate) {\n    var schedules = JSON.parse(schedulesJson);\n    var lastIndex = schedules.length - 1;\n    schedules[lastIndex].secondDate = secondDate;\n\n    return schedules;\n}",
                    "inputVariables": ["context.schedules", "inputDate"],
                    "outputVariable": "schedules"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:48877",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    },
                    {
                        "$$hashKey": "object:70954",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusUserDate",
                        "values": ["valid", "inferior 48"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao Segunda data agendamento selecao inesperado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao segunda data agendamento selecao",
                    "action": "input inesperado"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:2675",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao segunda data agendamento selecao inferior",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao segunda data agendamento selecao",
                    "action": "data inferior atual"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:6463",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    },
                    {
                        "$$hashKey": "object:7782",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusUserDate",
                        "values": ["inferior"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao segunda data agendamento selecao inferior 48h",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao segunda data agendamento selecao",
                    "action": "inferior 48"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:9434",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    },
                    {
                        "$$hashKey": "object:13188",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusUserDate",
                        "values": ["inferior 48"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado segunda data agendamento",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado segunda data agendamento",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:13970",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Save context second date",
                "$invalid": false,
                "settings": {
                    "variable": "secondDate",
                    "value": "{{inputDate}}",
                    "expiration": null
                },
                "conditions": [
                    {
                        "$$hashKey": "object:56893",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Set invalid date exception",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "5.4"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:30871",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Set Exception Past Date",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "5.12"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:28334",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    },
                    {
                        "$$hashKey": "object:33849",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusUserDate",
                        "values": ["inferior"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:134128",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    },
                    {
                        "$$hashKey": "object:135264",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "inputDate",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Celula Mike"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "2e0f0128-59c9-42e1-9112-5cf19b94f3e0",
        "root": false,
        "$title": "C.1.26 - Mensagem Segunda Data",
        "$position": { "top": "2501px", "left": "1055px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "5af386b7-fa85-4eec-8e9f-ef939b48681f": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "ca33fcf4-8a0b-48c0-b1be-dbfb2cb71255",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "ca33fcf4-8a0b-48c0-b1be-dbfb2cb71255",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:64961"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "f2b908b8-cfc6-4351-91bb-a8f83f3887f5",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "f2b908b8-cfc6-4351-91bb-a8f83f3887f5",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:64962"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "0898ad70-c69e-493c-a8a0-2fe062714040",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:51273",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "93488f04-6aac-4a71-88f1-7168bf0d8d9d",
                "$connId": "con_198",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Disagreement", "Negation"],
                        "$$hashKey": "object:15261",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:15252"
            },
            {
                "stateId": "e03db662-9106-48ca-9c60-28441e7867d9",
                "$connId": "con_203",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Consent", "Confirmation"],
                        "$$hashKey": "object:17190",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:17182"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Humm... 🤔 essa data não tem 48 horas de antecedência.\\n\\\nPosso tentar prosseguir mas não garanto o sucesso do agendamento.\\n\\\n\\n\\\nQuer continuar mesmo assim?';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ProcessHttp",
                "$title": "Get Intention",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "GET",
                    "uri": "{{config.api}}/SmallTalks/intention?userInput={{input.content}}",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "intention"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao segunda data agendamento antes 48 selecao sim",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao segunda data agendamento antes 48 selecao",
                    "action": "sim"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:18246",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Confirmation", "Consent"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao segunda data agendamento antes 48 selecao nao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao segunda data agendamento antes 48 selecao",
                    "action": "nao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:19301",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Disagreement", "Negation"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao segunda data agendamento antes 48 selecao inesperado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao segunda data agendamento antes 48 selecao",
                    "action": "input inesperado"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:20647",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confirmation"]
                    },
                    {
                        "$$hashKey": "object:72825",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Consent"]
                    },
                    {
                        "$$hashKey": "object:73929",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Disagreement"]
                    },
                    {
                        "$$hashKey": "object:74973",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Negation"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado segunda data confirmacao agendamento antes 48",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado segunda data confirmacao agendamento antes 48",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:22451",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Negation"]
                    },
                    {
                        "$$hashKey": "object:76158",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Disagreement"]
                    },
                    {
                        "$$hashKey": "object:77200",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Consent"]
                    },
                    {
                        "$$hashKey": "object:78244",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confirmation"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET exception Identifier",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "3.5"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "value": "2.3",
                    "variable": "exceptionIdentifier"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:139413",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "5af386b7-fa85-4eec-8e9f-ef939b48681f",
        "root": false,
        "$title": "C.1.27 - Mensagem Confirma segunda data",
        "$position": { "top": "2431.57px", "left": "670.571px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "e03db662-9106-48ca-9c60-28441e7867d9": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "236c96b5-5f80-4d9a-8cfa-900e3349095b",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "236c96b5-5f80-4d9a-8cfa-900e3349095b",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:71354"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "884afe24-b605-4ea8-9f8c-54212c50aa19",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "884afe24-b605-4ea8-9f8c-54212c50aa19",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:71355"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "cd5a84da-2146-474e-ae2e-ff1e81c03083",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:61857",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "74d77ea8-2bb1-4fec-a08e-e5e5d82836df",
                "$connId": "con_208",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["true"],
                        "$$hashKey": "object:40237",
                        "variable": "isValidHour"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:40228"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Ótimo! Agora por último, preciso de uma horário que sirva para as duas datas que me informou.\\n\\\n\\n\\\n✔️ Lembrete: Ao escolher um horário de parada após às 10:00, não podemos garantir a entrega do veículo no mesmo dia.\\n\\\n\\n\\\nPor favor, digite o {{boldTags@open}}horário{{boldTags@close}} no formato {{boldTags@open}}hh:mm{{boldTags@close}}';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao horario agendamento exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao horario agendamento exibicao",
                    "action": "exibicao"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "Reset isValidHour",
                "$invalid": false,
                "settings": { "variable": "isValidHour", "value": "false" },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "SetVariable",
                "$title": "Check Hour Format",
                "$invalid": false,
                "settings": {
                    "variable": "isValidHour",
                    "value": "true",
                    "expiration": null
                },
                "conditions": [
                    {
                        "$$hashKey": "object:38523",
                        "source": "input",
                        "comparison": "matches",
                        "variable": "isValidHour",
                        "values": ["(0[0-9]|1[0-9]|2[0-3]|[0-9]):[0-5][0-9]"]
                    }
                ]
            },
            {
                "type": "ExecuteScript",
                "$title": "Save hours",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(schedulesJson, hours) {\n    var schedules = JSON.parse(schedulesJson);\n    var lastIndex = schedules.length - 1;\n    schedules[lastIndex].hour = hours+\":00\";\n\n    return schedules;\n}",
                    "inputVariables": ["context.schedules", "input.content"],
                    "outputVariable": "schedules"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:60079",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "isValidHour",
                        "values": ["true"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao horario agendamento selecao Horario",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao horario agendamento selecao",
                    "action": "Horario digitado"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:81545",
                        "source": "context",
                        "comparison": "equals",
                        "values": ["true"],
                        "variable": "isValidHour"
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao horario agendamento selecao Inesperado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao horario agendamento selecao",
                    "action": "Input inesperado"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:82735",
                        "source": "context",
                        "comparison": "equals",
                        "values": ["false"],
                        "variable": "isValidHour"
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado preenchimento horario agendamento",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado preenchimento horario agendamento",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:39549",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "isValidHour",
                        "values": ["false"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Save context hours",
                "$invalid": false,
                "settings": {
                    "variable": "hours",
                    "value": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:58764",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "isValidHour",
                        "values": ["true"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET exception Identifier",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "5.5"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "e03db662-9106-48ca-9c60-28441e7867d9",
        "root": false,
        "$title": "C.1.29 - Solicita Horario",
        "$position": { "top": "2685px", "left": "1890px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "93488f04-6aac-4a71-88f1-7168bf0d8d9d": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "df44fef3-0242-4f67-8020-16752b33ab11",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "df44fef3-0242-4f67-8020-16752b33ab11",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:16716"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "89ef1199-1c94-4242-9a8f-173e5c4a518f",
                        "type": "text/plain",
                        "content": "Ok, então só me dizer outra data com no mínimo 48 horas de antecedência."
                    },
                    "$cardContent": {
                        "document": {
                            "id": "89ef1199-1c94-4242-9a8f-173e5c4a518f",
                            "type": "text/plain",
                            "content": "Ok, então só me dizer outra data com no mínimo 48 horas de antecedência."
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:16717"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "d2bce355-2683-41ff-8717-8f4a0ac44e57",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:16400",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Disable show MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run() {\n    var exceptionReturn = {showMsg: false};\n\n    return exceptionReturn;\n}",
                    "inputVariables": [],
                    "outputVariable": "exceptionReturn"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": {
            "stateId": "2e0f0128-59c9-42e1-9112-5cf19b94f3e0",
            "$invalid": false
        },
        "id": "93488f04-6aac-4a71-88f1-7168bf0d8d9d",
        "root": false,
        "$title": "C.1.28 - Redireciona para mudar a data informada",
        "$position": { "top": "2484px", "left": "1507px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "84bd5407-d1e7-49b0-92c7-512c3b434408": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "327501ef-2d0a-411f-9ddc-fd1a3fce9ffa",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "327501ef-2d0a-411f-9ddc-fd1a3fce9ffa",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:25306"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "cd7484f6-3852-4dfb-8309-6ebe5c0fba06",
                        "type": "text/plain",
                        "content": "{{msg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "cd7484f6-3852-4dfb-8309-6ebe5c0fba06",
                            "type": "text/plain",
                            "content": "{{msg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:25307"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "7ca0110d-b0ea-4ee0-9784-c7da64339617",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "7ca0110d-b0ea-4ee0-9784-c7da64339617",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:93663"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "a2815291-0c15-4b2b-975c-4dc5905861de",
                        "type": "text/plain",
                        "content": "Em caso de urgência, por gentileza, entre em contato conosco pela {{boldTags@open}}Central de atendimento:{{boldTags@close}}\n"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "a2815291-0c15-4b2b-975c-4dc5905861de",
                            "type": "text/plain",
                            "content": "Em caso de urgência, por gentileza, entre em contato conosco pela {{boldTags@open}}Central de atendimento:{{boldTags@close}}\n"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:93664"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "70915fd9-0ef2-4701-85d8-5ad22a624cbc",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "70915fd9-0ef2-4701-85d8-5ad22a624cbc",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:94611"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "0f02ba95-366b-442f-9a7f-54646a6e5cad",
                        "type": "text/plain",
                        "content": "{{boldTags@open}}0800 702 7526{{boldTags@close}} "
                    },
                    "$cardContent": {
                        "document": {
                            "id": "0f02ba95-366b-442f-9a7f-54646a6e5cad",
                            "type": "text/plain",
                            "content": "{{boldTags@open}}0800 702 7526{{boldTags@close}} "
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:94612"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "6533aa42-c953-4535-b081-dcddc34273b7",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "6533aa42-c953-4535-b081-dcddc34273b7",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:96043"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "bff50ffd-a247-4dc0-add1-3252677e2e06",
                        "type": "text/plain",
                        "content": "Para São Paulo capital:"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "bff50ffd-a247-4dc0-add1-3252677e2e06",
                            "type": "text/plain",
                            "content": "Para São Paulo capital:"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:96044"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "70b26235-3ade-4754-a5dd-bd2737c284f2",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "70b26235-3ade-4754-a5dd-bd2737c284f2",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:97027"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "79824b80-fcb4-4588-9555-bcbaaa54e2c0",
                        "type": "text/plain",
                        "content": "{{boldTags@open}}01132968700{{boldTags@close}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "79824b80-fcb4-4588-9555-bcbaaa54e2c0",
                            "type": "text/plain",
                            "content": "{{boldTags@open}}01132968700{{boldTags@close}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:97028"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "89a8dd09-245e-4308-9b35-77e151eee63f",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:24990",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "b054f4ed-ffc0-458f-9533-089a68a767f0",
                "$connId": "con_213",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:47517"
                    }
                ],
                "$$hashKey": "object:47498",
                "$invalid": false
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "TrackEvent",
                "$title": "Protocolo agendamento origem",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Protocolo agendamento origem",
                    "action": "{{context.flOrigem}}"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "/**\n            * All input variables needs to be passed as function param;\n            * Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n            * Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n            **/\n            function run(isUpdate, scheduleJson) {\n                let schedule = JSON.parse(scheduleJson);\n                let msg = \"Ótimo, quase tudo pronto 👍\\n\\nGerei aqui um número de protocolo {{boldTags@open}}{{context.protocolgenerated}}{{boldTags@close}}\\n\\nDentro de 24 horas entro em contato novamente para confirmar seu agendamento\";\n\n                if(isUpdate === \"True\" || isUpdate === \"true\")\n                {\n                    msg = \"Ótimo, quase tudo pronto 👍\\n\\nO protocolo {{boldTags@open}}\"+schedule.protocol+\"{{boldTags@close}} foi atualizado\\n\\nDentro de 24 horas entro em contato novamente para confirmar seu agendamento\";\n                }\n\n                return msg; //Return value will be saved as \"Return value variable\" field name\n            }",
                    "inputVariables": [
                        "context.isUpdate",
                        "context.newschedule"
                    ],
                    "outputVariable": "msg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao usuario servico",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao usuario {{requestedService}}",
                    "action": "{{contact.identity}}"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Geracao numero de protocolo",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Geracao numero de protocolo",
                    "action": "{{protocolgenerated}} | {{requestedService}} | {{contact.identity}}"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Servicos numero de protocolo",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Servicos numero de protocolo",
                    "action": "{{requestedService}}"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "SetVariable",
                "$title": "Reset reSchedule",
                "$invalid": false,
                "settings": { "variable": "reSchedule", "value": "false" },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "LIMPA MSG",
                "$invalid": false,
                "settings": { "variable": "msg", "expiration": 1 },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "84bd5407-d1e7-49b0-92c7-512c3b434408",
        "root": false,
        "$title": "C.1.32 - Exibir protocolo",
        "$position": { "top": "3028px", "left": "806px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "56b40fea-18a7-4dfc-a774-6b9bf6dd8d50": {
        "$contentActions": [
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "8d4e08da-69d1-4fd8-861b-606433aef3a4",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:32041",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "56b40fea-18a7-4dfc-a774-6b9bf6dd8d50",
        "root": false,
        "$title": "C.1.35 - Fim Agendamento",
        "$position": { "top": "3293px", "left": "1053px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "b054f4ed-ffc0-458f-9533-089a68a767f0": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "40ee90d9-977b-4a4d-81e0-55916aa54206",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "40ee90d9-977b-4a4d-81e0-55916aa54206",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:98039"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "859eea22-47db-4b39-9266-a7b5f7df7ea6",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "859eea22-47db-4b39-9266-a7b5f7df7ea6",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:98040"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "2e08cb55-73c0-477f-a645-73bffb9fb5d5",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:26251",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "56b40fea-18a7-4dfc-a774-6b9bf6dd8d50",
                "$connId": "con_218",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Negation", "Disagreement"],
                        "$$hashKey": "object:33358",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:33349"
            },
            {
                "stateId": "52720910-4b65-4807-bb13-b9337e346c80",
                "$connId": "con_223",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Consent", "Confirmation"],
                        "$$hashKey": "object:34476",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:34468"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Enquanto aguardamos a confirmação, posso te ajudar em algo mais?';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Informe contatos origem",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Informe contatos origem",
                    "action": "{{context.flOrigem}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:100547",
                        "source": "context",
                        "comparison": "equals",
                        "values": ["true"],
                        "variable": "contentCard@isVisible"
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Menu algo mais confirmacao exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Menu algo mais confirmacao exibicao",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:101742",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ProcessHttp",
                "$title": "Requisição SmallTalks",
                "$invalid": false,
                "settings": {
                    "headers": { "accept": "application/json;v=2" },
                    "method": "GET",
                    "uri": "{{config.api}}/SmallTalks/intention?userInput={{input.content}}",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "intention"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Menu algo mais confirmacao selecao SIM",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Menu algo mais confirmacao selecao",
                    "action": "sim"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:27473",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Confirmation", "Consent"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Menu algo mais confirmacao selecao NAO",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Menu algo mais confirmacao selecao",
                    "action": "nao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:28528",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Disagreement", "Negation"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Menu algo mais confirmacao selecao INESPERADO",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Menu algo mais confirmacao selecao",
                    "action": "input inesperado"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:29578",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Negation"]
                    },
                    {
                        "$$hashKey": "object:95152",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Disagreement"]
                    },
                    {
                        "$$hashKey": "object:96176",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Consent"]
                    },
                    {
                        "$$hashKey": "object:97220",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confirmation"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado menu algo confimacao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado menu algo confimacao",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:31010",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Negation"]
                    },
                    {
                        "$$hashKey": "object:98405",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Disagreement"]
                    },
                    {
                        "$$hashKey": "object:100449",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Consent"]
                    },
                    {
                        "$$hashKey": "object:101533",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confirmation"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET exception Identifier",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "3.5"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:145697",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "b054f4ed-ffc0-458f-9533-089a68a767f0",
        "root": false,
        "$title": "C.1.33 - Algo mais",
        "$position": { "top": "3222px", "left": "802px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "52720910-4b65-4807-bb13-b9337e346c80": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "5779234e-367b-4c30-aa3f-8d6b11960d88",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "5779234e-367b-4c30-aa3f-8d6b11960d88",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:32739"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "267c5d12-f5c6-4c75-9da6-e8013f255965",
                        "type": "text/plain",
                        "content": "Claro, vamos continuar então."
                    },
                    "$cardContent": {
                        "document": {
                            "id": "267c5d12-f5c6-4c75-9da6-e8013f255965",
                            "type": "text/plain",
                            "content": "Claro, vamos continuar então."
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:32740"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "cc29cd0a-ccd1-45c9-94a3-3bf2dcce6524",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:32423",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "52720910-4b65-4807-bb13-b9337e346c80",
        "root": false,
        "$title": "C.1.34 - Retorno Troca de telefone",
        "$position": { "top": "3297px", "left": "569px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "28ca6454-3365-4096-b6c0-71b117bfcaf7": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "6562ca9f-a6e7-4e7c-89ad-7b405df2d1f9",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": "2000" }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "6562ca9f-a6e7-4e7c-89ad-7b405df2d1f9",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": "2000"
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:9919"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "dc83eef8-d069-45e4-ba5e-d92394f6a260",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:37401",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "84bd5407-d1e7-49b0-92c7-512c3b434408",
                "$connId": "con_228",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["200"],
                        "$$hashKey": "object:8700",
                        "variable": "statusResponse"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:8681"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Get new Schedule",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(schedulesJson) {\n    var schedules = JSON.parse(schedulesJson);\n    var lastIndex = schedules.length - 1;\n\n    return schedules[lastIndex]; //Return value will be saved as \"Return value variable\" field name\n}",
                    "inputVariables": ["context.schedules"],
                    "outputVariable": "newSchedule"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Check if Update",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "/**\n* All input variables needs to be passed as function param;\n* Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n* Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n**/\nfunction run(scheduleJson) {\n    var schedule = JSON.parse(scheduleJson);\n\n\n    if(typeof schedule.protocol !== 'undefined'){\n        return true;\n    }\n\n    return false;           \n}",
                    "inputVariables": ["context.newSchedule"],
                    "outputVariable": "isUpdate"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "FIX PHONE",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(input){\n    var numberPattern = /\\d+/g;\n    var rmCountry = /(^550|^55|^0)/g;\n    let valid = false;\n    let phone = \"\";\n    let aux;\n\n    if(numberPattern.test(input) == true){\n        aux = input.match(numberPattern);\n        for(i = 0; i < aux.length; i++)\n            phone += aux[i]\n        if(rmCountry.test(phone) && phone.length > 11){\n            phone = phone.replace(rmCountry, \"\");\n        }\n        if(phone.length >= 10 && phone.length <= 11)\n            valid = true;\n    }\n    return phone;\n}",
                    "inputVariables": ["contact.phoneNumber"],
                    "outputVariable": "phone"
                },
                "conditions": []
            },
            {
                "type": "MergeContact",
                "$title": "SET PHONE",
                "$invalid": false,
                "settings": {
                    "extras": {},
                    "name": "{{contact.name}}",
                    "phoneNumber": "{{phone}}"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Append Protocol to Schedule",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(schedulesJson, responseJson, isUpdate) {\n    var schedules = JSON.parse(schedulesJson);\n    var response = JSON.parse(responseJson);\n    var lastIndex = schedules.length - 1;\n\n    if(isUpdate === \"False\" || isUpdate === \"false\")\n    {\n        schedules[lastIndex].protocol = response.protocol;    \n    }\n    \n    return schedules;\n}",
                    "inputVariables": [
                        "context.schedules",
                        "response",
                        "context.isUpdate"
                    ],
                    "outputVariable": "schedules"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:15469",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "ExecuteScript",
                "$title": "Update All Schedules in Contact",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "// Update all schedule in contact\nfunction run(contextSchedulesJson, contactSchedulesJson, isUpdate) {\n    var contextSchedules = JSON.parse(contextSchedulesJson);\n    var contactSchedules = JSON.parse(contactSchedulesJson);\n\n    var newSchedule = contextSchedules.pop();\n\n    if (isUpdate === \"True\" || isUpdate === \"true\") {\n        var option;\n        contactSchedules.forEach(function (item, index) {\n            if (item.protocol === newSchedule.protocol) {\n                option = index;\n            }\n        });\n\n        if(option >=0){\n            contactSchedules.splice(option, 1);\n            contactSchedules.push(newSchedule);\n        }\n    }\n    else if(isUpdate === \"False\" || isUpdate === \"false\")\n    {\n            contactSchedules.push(newSchedule);        \n    }\n\n\n    return contactSchedules; \n}",
                    "inputVariables": [
                        "context.schedules",
                        "contact.extras.schedules",
                        "context.isUpdate"
                    ],
                    "outputVariable": "contactSchedules"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:77073",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "MergeContact",
                "$title": "Update schedules contact",
                "$invalid": false,
                "settings": {
                    "extras": { "schedules": "{{context.contactSchedules}}" },
                    "name": "{{contact.name}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:54761",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Save Protocol context",
                "$invalid": false,
                "settings": {
                    "variable": "protocolgenerated",
                    "value": "{{response@protocol}}",
                    "expiration": 10
                },
                "conditions": [
                    {
                        "$$hashKey": "object:11598",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "LeasePlan"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF1E90",
                "label": "MergeContact",
                "id": "blip-tag-86ea71d8-f490-77f7-b4e3-28a05d2a67b2",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "28ca6454-3365-4096-b6c0-71b117bfcaf7",
        "root": false,
        "$title": "Registra agendamento",
        "$position": { "top": "2789px", "left": "404px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "74d77ea8-2bb1-4fec-a08e-e5e5d82836df": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "89632043-3a2a-4870-b8d1-2bfa40e67dd7",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "89632043-3a2a-4870-b8d1-2bfa40e67dd7",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:81506"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "020c8887-5cd7-4210-95b0-38cfdbfa318b",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "020c8887-5cd7-4210-95b0-38cfdbfa318b",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:81507"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "784f4051-ad48-4829-b343-d3ace4aa73ec",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$$hashKey": "object:43842",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "28ca6454-3365-4096-b6c0-71b117bfcaf7",
                "$connId": "con_5956",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "equals",
                        "values": ["sim", "confirmo", "ok"],
                        "$$hashKey": "object:7143"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:7135"
            },
            {
                "stateId": "1286e9bd-52f2-434a-84a6-3d4b66d379df",
                "$connId": "con_238",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Disagreement", "Negation", "Confusion"],
                        "$$hashKey": "object:57042",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:57033"
            },
            {
                "stateId": "28ca6454-3365-4096-b6c0-71b117bfcaf7",
                "$connId": "con_5961",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Confirmation", "Consent"],
                        "$$hashKey": "object:58482",
                        "variable": "intention"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:58474"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "TrackEvent",
                "$title": "Confirmacao dados agendamento exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados agendamento exibicao",
                    "action": "exibicao"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Ok, veja o que eu anotei:\\n\\\n{{boldTags@open}}{{context.firstDate}}{{boldTags@close}} \\n\\\ne segunda opção:\\n\\\n{{boldTags@open}}{{context.secondDate}}{{boldTags@close}} \\n\\\nno horário:\\n\\\n{{boldTags@open}}{{context.hours}}{{boldTags@close}}\\n\\\n\\n\\\nConfirma essas informações?';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ProcessHttp",
                "$title": "Get Intention",
                "$invalid": false,
                "settings": {
                    "headers": {},
                    "method": "GET",
                    "uri": "{{config.api}}/SmallTalks/intention?userInput={{input.content}}",
                    "responseStatusVariable": "statusResponse",
                    "responseBodyVariable": "intention"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao dados agendamento selecao sim",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados agendamento selecao",
                    "action": "sim"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:50642",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Confirmation", "Consent"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao dados agendamento selecao nao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados agendamento selecao",
                    "action": "nao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:51721",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Negation", "Disagreement"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao dados agendamento selecao inesperado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao dados agendamento selecao",
                    "action": "input inesperado"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:52886",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": [
                            "Negation",
                            "Disagreement",
                            "Consent",
                            "Confirmation"
                        ]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado confirmacao dados agendamento",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado confirmacao dados agendamento",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:54593",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Negation"]
                    },
                    {
                        "$$hashKey": "object:89609",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Disagreement"]
                    },
                    {
                        "$$hashKey": "object:90653",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Consent"]
                    },
                    {
                        "$$hashKey": "object:91695",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confirmation"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET exception Identifier",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "3.5"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:142200",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#7762E3",
                "label": "ProcessHttp",
                "id": "blip-tag-569ad781-a8da-b582-71cf-066769641d5a",
                "canChangeBackground": false
            },
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "74d77ea8-2bb1-4fec-a08e-e5e5d82836df",
        "root": false,
        "$title": "C.1.30 - Exibir dados agendamento",
        "$position": { "top": "2800px", "left": "797px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "1286e9bd-52f2-434a-84a6-3d4b66d379df": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "264f6835-bc2e-40cb-850e-034f8fc2adc0",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "264f6835-bc2e-40cb-850e-034f8fc2adc0",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:56593"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "28e4f20b-8d8b-49a4-ad68-9e8fff927090",
                        "type": "text/plain",
                        "content": "Sem problemas, só me passar as informações novamente 😉"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "28e4f20b-8d8b-49a4-ad68-9e8fff927090",
                            "type": "text/plain",
                            "content": "Sem problemas, só me passar as informações novamente 😉"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:56594"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "b74c0d1b-5ffd-4f7b-8c05-b4e77fe46449",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:56167",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$tags": [],
        "$defaultOutput": {
            "stateId": "a831e432-3802-4b80-b6f3-f8ac9b7e8bc4",
            "$invalid": false
        },
        "id": "1286e9bd-52f2-434a-84a6-3d4b66d379df",
        "root": false,
        "$title": "C.1.31 - Reinicia cadastro data e horário",
        "$position": { "top": "2860px", "left": "2116px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "a1dfc3f5-aefc-4894-8c4b-8fc19897fc06": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "92cfaeec-f27c-4a72-a84d-445f8fbb1c6c",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "92cfaeec-f27c-4a72-a84d-445f8fbb1c6c",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:25754"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "7d8f720f-9531-41e0-815b-855fa72c699d",
                        "type": "text/plain",
                        "content": "Não encontramos nenhum fornecedor próximo do endereço informado. Por favor, me informe outro endereço para que eu possa buscar um fornecedor."
                    },
                    "$cardContent": {
                        "document": {
                            "id": "7d8f720f-9531-41e0-815b-855fa72c699d",
                            "type": "text/plain",
                            "content": "Não encontramos nenhum fornecedor próximo do endereço informado. Por favor, me informe outro endereço para que eu possa buscar um fornecedor."
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:25755"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "196010c6-f885-447b-b5bb-fa79356110c2",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:24187",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$defaultOutput": {
            "stateId": "9cd303cb-6275-4a1b-abac-32931b2dc539",
            "$invalid": false
        },
        "$tags": [],
        "id": "a1dfc3f5-aefc-4894-8c4b-8fc19897fc06",
        "root": false,
        "$title": "Fornecedor não encontrado",
        "$position": { "top": "821px", "left": "1192px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "2a602461-7df1-49bd-8145-c0c37dbc8632": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "255fa673-fa16-4a6c-8326-bbcc7d6c221c",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "255fa673-fa16-4a6c-8326-bbcc7d6c221c",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:12824"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "9f420ba3-3de3-403e-8a66-127bc0442fca",
                        "type": "text/plain",
                        "content": "Ok! Esses são os contatos da nossa {{boldTags@open}}Central de atendimento:{{boldTags@close}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "9f420ba3-3de3-403e-8a66-127bc0442fca",
                            "type": "text/plain",
                            "content": "Ok! Esses são os contatos da nossa {{boldTags@open}}Central de atendimento:{{boldTags@close}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:12825"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "35eb47f1-2f04-4de8-91ce-a60d0e2393c2",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "35eb47f1-2f04-4de8-91ce-a60d0e2393c2",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:16561"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "565c06fd-a8ff-4136-ac44-935ecc829fca",
                        "type": "text/plain",
                        "content": "{{boldTags@open}}08007027526{{boldTags@close}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "565c06fd-a8ff-4136-ac44-935ecc829fca",
                            "type": "text/plain",
                            "content": "{{boldTags@open}}08007027526{{boldTags@close}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:16562"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "c641ab54-28c8-46d2-8e73-5e9621a92422",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "c641ab54-28c8-46d2-8e73-5e9621a92422",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:16581"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "94b777c7-3ca7-4b95-a244-91bb108f2428",
                        "type": "text/plain",
                        "content": "Para São Paulo capital:"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "94b777c7-3ca7-4b95-a244-91bb108f2428",
                            "type": "text/plain",
                            "content": "Para São Paulo capital:"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:14452"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "92b9bce7-657b-4045-84f3-dc19361ba739",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "92b9bce7-657b-4045-84f3-dc19361ba739",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:14451"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "7277126d-a495-4e30-a463-07507951da49",
                        "type": "text/plain",
                        "content": "{{boldTags@open}}01132968700{{boldTags@close}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "7277126d-a495-4e30-a463-07507951da49",
                            "type": "text/plain",
                            "content": "{{boldTags@open}}01132968700{{boldTags@close}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:16582"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "15c9dc57-e73c-46a8-99e7-d953e86ad752",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:12393",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "$tags": [],
        "id": "2a602461-7df1-49bd-8145-c0c37dbc8632",
        "root": false,
        "$title": "C.1.41 - Fale com a central",
        "$position": { "top": "1721px", "left": "749px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "89381d44-8b2f-4236-b0b5-2168f58e7d0e": {
        "$contentActions": [
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "9f69775a-e98a-43e4-bb16-c327b3f6de15",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:89354",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$defaultOutput": {
            "stateId": "a7492ba2-3617-45e5-ae88-964d75007e6e",
            "$invalid": false
        },
        "$tags": [],
        "id": "89381d44-8b2f-4236-b0b5-2168f58e7d0e",
        "root": false,
        "$title": "Alterar somente data e hora",
        "$position": { "top": "1034px", "left": "803px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "80a06601-5ca3-4117-91aa-aec63c2ff8e4": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "2f27ed70-53f3-460b-a562-20095d774795",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "2f27ed70-53f3-460b-a562-20095d774795",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:48049"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "3a89fcbd-657f-4ac2-8860-ed540b714698",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$invalid": false,
                "$$hashKey": "object:47025"
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "28ca6454-3365-4096-b6c0-71b117bfcaf7",
                "$connId": "con_458",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "equals",
                        "values": ["1", "Aceito", "Concordo", "ok"],
                        "$$hashKey": "object:21157"
                    },
                    {
                        "$$hashKey": "object:21219",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "context.isInsideRadius",
                        "values": ["true"]
                    },
                    {
                        "$$hashKey": "object:23691",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "changeOnlyProvider",
                        "values": ["true"]
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:21149"
            },
            {
                "stateId": "a7492ba2-3617-45e5-ae88-964d75007e6e",
                "$connId": "con_463",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "equals",
                        "values": ["1", "Aceito", "Concordo", "ok"],
                        "$$hashKey": "object:47254"
                    },
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"],
                        "$$hashKey": "object:47255"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:47220"
            },
            {
                "stateId": "b7c20e52-912b-46cc-b215-36fb34b6d56f",
                "$connId": "con_468",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "equals",
                        "values": [
                            "2",
                            "mudar fornecedor",
                            "trocar fornecedor",
                            "fornecedor"
                        ],
                        "$$hashKey": "object:47297"
                    },
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"],
                        "$$hashKey": "object:47298"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:47221"
            },
            {
                "stateId": "2a602461-7df1-49bd-8145-c0c37dbc8632",
                "$connId": "con_473",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "equals",
                        "values": [
                            "3",
                            "falar com a central",
                            "falar",
                            "central telefônica"
                        ],
                        "$$hashKey": "object:47340"
                    },
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"],
                        "$$hashKey": "object:47341"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:47222"
            },
            {
                "stateId": "b7c20e52-912b-46cc-b215-36fb34b6d56f",
                "$connId": "con_478",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["True"],
                        "variable": "context.isInsideRadius",
                        "$$hashKey": "object:47383"
                    },
                    {
                        "source": "input",
                        "comparison": "equals",
                        "values": [
                            "mudar fornecedor",
                            "trocar fornecedor",
                            "2"
                        ],
                        "$$hashKey": "object:47384"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:47223"
            },
            {
                "stateId": "b7c20e52-912b-46cc-b215-36fb34b6d56f",
                "$connId": "con_483",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Disagreement", "Frustation", "Negation"],
                        "variable": "intention",
                        "$$hashKey": "object:47426"
                    },
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"],
                        "$$hashKey": "object:47427"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:47224"
            },
            {
                "stateId": "28ca6454-3365-4096-b6c0-71b117bfcaf7",
                "$connId": "con_488",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Consent", "Confirmation"],
                        "$$hashKey": "object:24956",
                        "variable": "intention"
                    },
                    {
                        "$$hashKey": "object:27073",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "changeOnlyProvider",
                        "values": ["true"]
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:24948"
            },
            {
                "stateId": "a7492ba2-3617-45e5-ae88-964d75007e6e",
                "$connId": "con_493",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Consent", "Confirmation"],
                        "variable": "intention",
                        "$$hashKey": "object:47473"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:47225"
            },
            {
                "stateId": "91b588a2-01d5-493f-b39d-c4b1f9532681",
                "$connId": "con_498",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["true"],
                        "$$hashKey": "object:9197",
                        "variable": "context.isInsideRadius"
                    },
                    {
                        "$$hashKey": "object:10456",
                        "source": "input",
                        "comparison": "equals",
                        "values": ["4", "finalizar", "sair"]
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:9189"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "TrackEvent",
                "$title": "EXIBICAO FORNECEDOR",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Exibicao Fornecedor {{requestedService}}",
                    "action": "{{context.provider@cnpj}}"
                },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "SetVariable",
                "$title": "SET AFIRMATION EXCEPTION",
                "$invalid": false,
                "settings": {
                    "value": "3.5",
                    "variable": "exceptionIdentifier"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:121728",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "isInsideRadius",
                        "values": ["true"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET INVALID OPTION EXCEPTION",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "3.3"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:123707",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "isInsideRadius",
                        "values": ["false"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao endereco distante selecao 1",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao endereco distante selecao",
                    "action": "1"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"],
                        "$$hashKey": "object:68758"
                    },
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Consent", "Confirmation"],
                        "$$hashKey": "object:68759"
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao endereco distante selecao 1",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao endereco distante selecao",
                    "action": "1"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"],
                        "$$hashKey": "object:55537"
                    },
                    {
                        "source": "input",
                        "comparison": "equals",
                        "values": ["1", "Aceito", "Concordo", "ok"],
                        "$$hashKey": "object:55538"
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao endereco distante selecao 2",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao endereco distante selecao",
                    "action": "2"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"],
                        "$$hashKey": "object:24946"
                    },
                    {
                        "source": "input",
                        "comparison": "equals",
                        "values": [
                            "2",
                            "trocar fornecedor",
                            "mudar fornecedor",
                            "fornecedor"
                        ],
                        "$$hashKey": "object:24947"
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao endereco distante selecao 3",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao endereco distante selecao",
                    "action": "3"
                },
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "equals",
                        "values": [
                            "3",
                            "falar com a central",
                            "falar",
                            "central telefônica"
                        ]
                    },
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao endereco distante selecao inesperado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao endereco distante selecao",
                    "action": "input inesperado"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"],
                        "$$hashKey": "object:10625"
                    },
                    {
                        "source": "input",
                        "comparison": "notEquals",
                        "values": ["1"],
                        "$$hashKey": "object:10626"
                    },
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Consent"],
                        "$$hashKey": "object:10627"
                    },
                    {
                        "$$hashKey": "object:43731",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confirmation"]
                    },
                    {
                        "$$hashKey": "object:44777",
                        "source": "input",
                        "comparison": "notEquals",
                        "values": ["2"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado confirmacao endereco distante",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado confirmacao endereco distante",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"],
                        "$$hashKey": "object:10344"
                    },
                    {
                        "source": "input",
                        "comparison": "notEquals",
                        "values": ["1"],
                        "$$hashKey": "object:10345"
                    },
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Consent"],
                        "$$hashKey": "object:10346"
                    },
                    {
                        "$$hashKey": "object:42378",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confirmation"]
                    },
                    {
                        "$$hashKey": "object:43424",
                        "source": "input",
                        "comparison": "notEquals",
                        "values": ["2"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao endereco proximo selecao sim",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao endereco proximo selecao",
                    "action": "sim"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"]
                    },
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Confirmation", "Consent"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao endereco proximo selecao nao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao endereco proximo selecao",
                    "action": "nao"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"]
                    },
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Disagreement", "Frustation", "Negation"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao endereco proximo selecao mudar fornecedor",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao endereco proximo selecao",
                    "action": "mudar fornecedor"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"]
                    },
                    {
                        "source": "input",
                        "comparison": "equals",
                        "values": ["mudar fornecedor", "trocar fornecedor"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado confirmacao endereco proximo inesperado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado confirmacao endereco proximo",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"],
                        "$$hashKey": "object:71113"
                    },
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Disagreement"],
                        "$$hashKey": "object:71114"
                    },
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["frustration"],
                        "$$hashKey": "object:71115",
                        "variable": "intention"
                    },
                    {
                        "$$hashKey": "object:38534",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["negation"]
                    },
                    {
                        "$$hashKey": "object:39576",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["consent"]
                    },
                    {
                        "$$hashKey": "object:40622",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["confirmation"]
                    },
                    {
                        "$$hashKey": "object:41646",
                        "source": "input",
                        "comparison": "notEquals",
                        "values": ["mudar fornecedor"]
                    },
                    {
                        "$$hashKey": "object:41688",
                        "source": "input",
                        "comparison": "notEquals",
                        "values": ["trocar fornecedor"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confiração Fornecedor Proximo Serviço",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao fornecedor proximo {{requestedService}}",
                    "action": "{{context.provider@cnpj}}"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "context.isInsideRadius",
                        "values": ["true"]
                    },
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Consent", "Confirmation"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confimação Fornecedor Distante Serviço",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "action": "{{context.provider@cnpj}}",
                    "category": "Confirmacao fornecedor distante {{requestedService}}"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "context.isInsideRadius",
                        "values": ["false"],
                        "$$hashKey": "object:37204"
                    },
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "intention",
                        "values": ["Disagreement", "Negation"],
                        "$$hashKey": "object:37205"
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Confirmacao endereco proximo selecao input inesperado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Confirmacao endereco proximo selecao",
                    "action": "input inesperado"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "context.isInsideRadius",
                        "values": ["True"],
                        "$$hashKey": "object:52847"
                    },
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["Confirmation"],
                        "$$hashKey": "object:52848"
                    },
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Disagreement"],
                        "$$hashKey": "object:52849",
                        "variable": "intention"
                    },
                    {
                        "$$hashKey": "object:32184",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["frustration"]
                    },
                    {
                        "$$hashKey": "object:33228",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["negation"]
                    },
                    {
                        "$$hashKey": "object:35991",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "intention",
                        "values": ["consent"]
                    },
                    {
                        "$$hashKey": "object:37037",
                        "source": "input",
                        "comparison": "notEquals",
                        "values": ["mudar fornecedor"]
                    },
                    {
                        "$$hashKey": "object:37092",
                        "source": "input",
                        "comparison": "notEquals",
                        "values": ["trocar fornecedor"]
                    }
                ]
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "80a06601-5ca3-4117-91aa-aec63c2ff8e4",
        "root": false,
        "$title": "C.1.20.1 - Tracking check",
        "$position": { "top": "1719px", "left": "1005px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "a831e432-3802-4b80-b6f3-f8ac9b7e8bc4": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "1ed87eac-003f-4a9d-ab58-09944bb8716f",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "1ed87eac-003f-4a9d-ab58-09944bb8716f",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:5640"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "d8c0ef3c-d652-4592-a821-04236a04b645",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "d8c0ef3c-d652-4592-a821-04236a04b645",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:5641"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "4d8bd828-7335-4439-b265-317e98ad016a",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$invalid": false,
                "$$hashKey": "object:52222"
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "146802ec-3602-4075-80d4-a3a533c2a7f2",
                "$connId": "con_568",
                "conditions": [
                    {
                        "$$hashKey": "object:45665",
                        "source": "context",
                        "variable": "input.type",
                        "values": ["application/vnd.lime.location+json"],
                        "comparison": "equals"
                    },
                    {
                        "$$hashKey": "object:15795",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "trackInput",
                        "values": ["Localizacao enviada"]
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:39676"
            },
            {
                "stateId": "b831ad24-b74b-4d38-9720-96d51d9d2aab",
                "$connId": "con_573",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["CEP digitado"],
                        "$$hashKey": "object:40947",
                        "variable": "trackInput"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:40939"
            },
            {
                "stateId": "abe8196f-d6bc-48c7-9a43-1ec1d2a8489a",
                "$connId": "con_578",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["Nao sabe o CEP"],
                        "$$hashKey": "object:48933",
                        "variable": "trackInput"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:48925"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Eu posso buscar um fornecedor da seguinte forma:\\n\\\n\\n\\\n- {{boldTags@open}}Compartilhe sua localização atual 📍{{boldTags@close}}\\n\\\n\\n\\\n- Ou digite {{boldTags@open}}o CEP{{boldTags@close}} do endereço que você quer que eu busque 🗺️';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}\n",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao tipo endereco origem",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao tipo endereco origem",
                    "action": "{{context.flOrigem}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:7730",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao tipo endereco",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao tipo endereco",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:10121",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET skipFlow",
                "$invalid": false,
                "settings": { "variable": "skipFlow", "value": "false" },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "TRACKING VALIDATE",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "//Input: input.content\n//Output: validInput\n\nfunction run(input, inputType) {\n    let removeDigits = /\\d+/;\n    let aux;\n    const invalid = \"Input inesperado\";\n\n    if(inputType === \"application/vnd.lime.location+json\"){\n        return \"Localizacao enviada\";\n    }\n\n    try{\n        const optionsRegex = {\n            \"((^{\\\"latitude\\\":(-|\\\\+)?[0-9]+\\.[0-9]+,)(\\\"longitude\\\":(-|\\\\+)?[0-9]+\\.[0-9]+}$))\": \"Localizacao enviada\",\n            \"(n(ã|a)*o\\\\s*(sei|lembro)|lembr)\": \"Nao sabe o CEP\"\n        };\n\n        for(let key in optionsRegex) {\n\n            if(optionsRegex.hasOwnProperty(key)) {\n                const matching = new RegExp(key, \"i\");\n\n                if(matching.test(input)) {\n                    return optionsRegex[key];\n                }\n            }\n        }\n\n        if(removeDigits.test(input)){\n            aux = input.replace(/\\D/g,'');\n            if(aux.length == 8){\n                return \"CEP digitado\";\n            }\n        }\n    }catch(e){\n        return invalid;\n    }\n    return invalid;\n}\n",
                    "inputVariables": ["input.content", "input.type"],
                    "outputVariable": "trackInput"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao tipo endereco selecao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "action": "{{trackInput}}",
                    "category": "Solicitacao tipo endereco selecao"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado tipo endereco",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado tipo endereco",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:55687",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "trackInput",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Fluxo sem API"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET EXCEPTION IDENTIFIER",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "5.7"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "Save nput type",
                "$invalid": false,
                "settings": {
                    "variable": "inputType",
                    "value": "{{input.type}}"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "Save INput content",
                "$invalid": false,
                "settings": {
                    "variable": "inputContent",
                    "value": "{{input.content}}"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "a831e432-3802-4b80-b6f3-f8ac9b7e8bc4",
        "root": false,
        "$title": "C.1.2 - Solicita tipo do endereço",
        "$position": { "top": "637px", "left": "958px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "146802ec-3602-4075-80d4-a3a533c2a7f2": {
        "$contentActions": [
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "428fd17f-221d-463e-9446-599e43220cb5",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "userInput"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "variable": "userInput"
                },
                "$invalid": false,
                "$$hashKey": "object:166719"
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "a831e432-3802-4b80-b6f3-f8ac9b7e8bc4",
                "$connId": "con_1053",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "equals",
                        "values": ["voltar"],
                        "$$hashKey": "object:166939"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:166914"
            },
            {
                "stateId": "a8b2b52a-9e25-47bd-a0a7-4eafc12f0cbd",
                "$connId": "con_1058",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "values": ["application/vnd.lime.location+json"],
                        "$$hashKey": "object:166989",
                        "variable": "input.type"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:166916"
            }
        ],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [
            {
                "type": "SetVariable",
                "$title": "SET exception Identifier",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "5.13"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:32540",
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["application/vnd.lime.location+json"],
                        "variable": "input.type"
                    }
                ]
            },
            {
                "type": "MergeContact",
                "$title": "Save Localization",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "latitude": "{{input.content@latitude}}",
                        "longitude": "{{input.content@longitude}}"
                    },
                    "name": "{{contact.name}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:37480",
                        "source": "context",
                        "comparison": "equals",
                        "values": ["application/vnd.lime.location+json"],
                        "variable": "input.type"
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado envio localizacao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado envio localizacao",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "input.type",
                        "values": ["application/vnd.lime.location+json"],
                        "$$hashKey": "object:82536"
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Envio localizacao quantidade",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Envio localizacao",
                    "action": "localizacao enviada"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "input.type",
                        "values": ["application/vnd.lime.location+json"],
                        "$$hashKey": "object:82411"
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Envio localizacao INESPERADO",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Envio localizacao",
                    "action": "input inesperado"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:82789",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "input.type",
                        "values": ["application/vnd.lime.location+json"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "Set UseCoordinate",
                "$invalid": false,
                "settings": { "variable": "useCoordinate", "value": "true" },
                "conditions": [
                    {
                        "$$hashKey": "object:39338",
                        "source": "context",
                        "comparison": "equals",
                        "values": ["application/vnd.lime.location+json"],
                        "variable": "input.type"
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Fluxo sem API"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF1E90",
                "label": "MergeContact",
                "id": "blip-tag-86ea71d8-f490-77f7-b4e3-28a05d2a67b2",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "146802ec-3602-4075-80d4-a3a533c2a7f2",
        "root": false,
        "$title": "C.1.3 - Solicita localização",
        "$position": { "top": "845px", "left": "802px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "abe8196f-d6bc-48c7-9a43-1ec1d2a8489a": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "980c7bb7-5159-41de-9265-5edbbaac46ca",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "980c7bb7-5159-41de-9265-5edbbaac46ca",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:35051"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "63d37e2d-87f5-4141-9b11-f9e489bc8165",
                        "type": "text/plain",
                        "content": "Não tem problema, vamos seguir sem o CEP."
                    },
                    "$cardContent": {
                        "document": {
                            "id": "63d37e2d-87f5-4141-9b11-f9e489bc8165",
                            "type": "text/plain",
                            "content": "Não tem problema, vamos seguir sem o CEP."
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:35052"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "97879405-c68b-4ae5-911b-01da85734e76",
                            "type": "text/plain",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:34732",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "80244861-588e-47bb-83aa-4ee36b43e7e2",
                "$connId": "con_1513",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:45950"
                    },
                    {
                        "$$hashKey": "object:89541",
                        "source": "context",
                        "comparison": "notExists",
                        "values": [],
                        "variable": "contact.extras.secondItAddr"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:45941"
            },
            {
                "stateId": "ea3a6879-a6f9-4ee1-97ce-441ffdc3a4f2",
                "$connId": "con_1518",
                "conditions": [
                    {
                        "source": "input",
                        "comparison": "exists",
                        "values": [],
                        "$$hashKey": "object:89525"
                    },
                    {
                        "$$hashKey": "object:90791",
                        "source": "context",
                        "comparison": "exists",
                        "values": [],
                        "variable": "contact.extras.secondItAddr"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:89517"
            }
        ],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "$tags": [],
        "id": "abe8196f-d6bc-48c7-9a43-1ec1d2a8489a",
        "root": false,
        "$title": "Mensagem Sem CEP",
        "$position": { "top": "427px", "left": "1193px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "65ebced0-76be-48b6-854c-49e8299ecbcf": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "00730953-4eb9-44b7-b884-36546be8372a",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "00730953-4eb9-44b7-b884-36546be8372a",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:54968"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "6ead9bd3-0622-4257-8379-decce012be3b",
                        "type": "text/plain",
                        "content": "Só digitar que eu atualizo pra você..."
                    },
                    "$cardContent": {
                        "document": {
                            "id": "6ead9bd3-0622-4257-8379-decce012be3b",
                            "type": "text/plain",
                            "content": "Só digitar que eu atualizo pra você..."
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:54969"
            },
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "3935de07-c2cb-458e-82f5-125fcf194ddf",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$invalid": false,
                "$$hashKey": "object:29950"
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "f6fcc214-5fe1-4079-8b97-cf72803c597e",
                "$connId": "con_1748",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Erro Script"],
                        "$$hashKey": "object:30148",
                        "variable": "revalidate"
                    },
                    {
                        "$$hashKey": "object:40689",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "revalidate",
                        "values": ["Invalido"]
                    }
                ],
                "$$hashKey": "object:30129",
                "$invalid": false
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "SET Revalidate",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "\n    function run(localChange) {\n        try{\n            if(localChange == \"Bairro\" || localChange == \"Tudo\"){\n                return \"C.1.6 - Solicita Bairro\";\n            }\n            if(localChange == \"Cidade\"){\n                return \"C.1.6 - Solicita Bairro\";\n            }\n            if(localChange == \"Estado\"){\n                return \"C.1.6 - Solicita Bairro\";\n            }\n            \n        }catch(e){\n            return \"Erro Script\";\n        }\n        return \"Invalido\";\n    }",
                    "inputVariables": ["localChange"],
                    "outputVariable": "revalidate"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SKIPFLOW TRUE",
                "$invalid": false,
                "settings": {
                    "variable": "skipFlow",
                    "value": "true",
                    "expiration": null
                },
                "conditions": [
                    {
                        "$$hashKey": "object:72402",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "localChange",
                        "values": ["Bairro", "Cidade", "Estado"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SKIPFLOLW False",
                "$invalid": false,
                "settings": { "variable": "skipFlow", "value": "false" },
                "conditions": [
                    {
                        "$$hashKey": "object:74496",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "localChange",
                        "values": ["Bairro"]
                    },
                    {
                        "$$hashKey": "object:76669",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "localChange",
                        "values": ["Cidade"]
                    },
                    {
                        "$$hashKey": "object:78528",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "localChange",
                        "values": ["Estado"]
                    }
                ]
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "SetVariable",
                "$title": "CHANGE flOrigem",
                "$invalid": false,
                "settings": {
                    "variable": "flOrigem",
                    "value": "{{revalidate}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:34912",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "revalidate",
                        "values": ["Erro Script"]
                    },
                    {
                        "$$hashKey": "object:36166",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "revalidate",
                        "values": ["Invalido"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET EXCEPTION IDENTIFIER",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "3.1"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "nlpReturn",
                "$invalid": false,
                "settings": {
                    "variable": "nlpReturn",
                    "value": "{{revalidate}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:82238",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "localChange",
                        "values": ["Tudo"]
                    }
                ]
            }
        ],
        "$inputSuggestions": [],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "$tags": [
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "id": "65ebced0-76be-48b6-854c-49e8299ecbcf",
        "root": false,
        "$title": "C.1.14.1 - Altera Bairro/Cidade/Estado",
        "$position": { "top": "1259px", "left": "1439px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "80244861-588e-47bb-83aa-4ee36b43e7e2": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "738a18af-0af5-4e5c-98c1-fc5b7528b4ba",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "738a18af-0af5-4e5c-98c1-fc5b7528b4ba",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:12888"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "5b2a1c30-9f8c-4693-abc1-f6e9612bb85b",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "5b2a1c30-9f8c-4693-abc1-f6e9612bb85b",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:12889"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "70507a70-767e-443c-9858-dc76efd78b80",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false,
                    "validation": {
                        "rule": "type",
                        "type": "text/plain",
                        "error": "Desculpe, não consegui entender. Por enquanto só consigo entender texto."
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:12890"
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "cec79cf2-34a3-47dc-b9d6-eab9bc9cbf08",
                "$connId": "con_1753",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Input inesperado"],
                        "$$hashKey": "object:42657",
                        "variable": "validInput"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:42649"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Qual é o {{boldTags@open}}bairro?{{boldTags@close}}';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao Bairro",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao bairro",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"],
                        "$$hashKey": "object:20728"
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET useCoordinate",
                "$invalid": false,
                "settings": { "variable": "useCoordinate", "value": "false" },
                "conditions": []
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "VALIDACAO ENTRADA",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "//FORMAT MSG\n//Input: input.content\n//Output: validInput\n\n    function run(input) {\n        let value = \"Input inesperado\";\n        \n        try{\n            let valid = false;\n            let removeDigits = /\\d+/; //Confere a existencia de digitos\n            let rm = /(^o\\s+|\\s+e\\s+|\\s+é\\s+|^é\\s+|\\s+bairro\\s+(é|e)\\s+|\\s+ess(e|a)\\s+(é|e)\\s+|\\s+ess(e|a)\\s+|\\s+bairro\\s+|\\s+aqui\\s+|\\s+est(á|a)\\s+|\\s*ok\\s+|\\s*cu\\s*|\\s*fdp\\s*|\\s*filho\\s*da\\s*puta|\\s*teste\\s*|\\s*desgra(c|ç)a(do|da))/gi; //Remove alguns termos de resposta do usuario\n\t\t    let re = /([a-zA-Z\\u00C0-\\u00FF ']{3,40})+/; //Captura nome\n\t\t    let name = input.replace(rm, '');\n            name = name.replace(/( +(?= )|^\\s+|\\s+$)/g,'');  //Remove espacos adicionais\n        \n            if(removeDigits.test(name) == true){\n                return value;\n            }        \n\n            if(re.test(name) == true)\n                if(name.match(re)[0] != \" \"){\n                    valid = true;\n                    value = name.match(re)[0];\n            }\n        }catch(e){\n            value = \"Input inesperado\";\n        }\n\n        \n            \n        return value;\n    }\n\n",
                    "inputVariables": ["input.content"],
                    "outputVariable": "validInput"
                },
                "conditions": []
            },
            {
                "type": "MergeContact",
                "$title": "Update BAIRRO",
                "$invalid": false,
                "settings": {
                    "extras": { "bairro": "{{validInput}}" },
                    "name": "{{contact.name}}"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "validInput",
                        "values": ["Input inesperado"],
                        "$$hashKey": "object:14353"
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET EXCEPTION IDENTIFIER",
                "$invalid": false,
                "settings": {
                    "value": "5.8",
                    "variable": "exceptionIdentifier"
                },
                "conditions": []
            },
            {
                "type": "SetVariable",
                "$title": "SET API Exception",
                "$invalid": false,
                "settings": {
                    "variable": "exceptionIdentifier",
                    "value": "2.3"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "statusResponse",
                        "values": ["200"]
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET API apiIdentifier",
                "$invalid": false,
                "settings": {
                    "variable": "apiIdentifier",
                    "value": "Small Talks"
                },
                "conditions": []
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#FF1E90",
                "label": "MergeContact",
                "id": "blip-tag-86ea71d8-f490-77f7-b4e3-28a05d2a67b2",
                "canChangeBackground": false
            },
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "80244861-588e-47bb-83aa-4ee36b43e7e2",
        "root": false,
        "$title": "C.1.6 - Solicita Bairro",
        "$position": { "top": "232px", "left": "1184px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "f6fcc214-5fe1-4079-8b97-cf72803c597e": {
        "$contentActions": [
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "70c2f978-c31d-4d43-8d16-da1b9bf120ab",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:29583",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "$tags": [],
        "id": "f6fcc214-5fe1-4079-8b97-cf72803c597e",
        "root": false,
        "$title": "Set Cadastro to Excecoes - Retorno",
        "$position": { "top": "1272px", "left": "1729px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "ea3a6879-a6f9-4ee1-97ce-441ffdc3a4f2": {
        "$contentActions": [
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "3efc7fac-56ab-4e65-ac1b-37118936d823",
                        "type": "application/vnd.lime.chatstate+json",
                        "content": { "state": "composing", "interval": 1000 }
                    },
                    "$cardContent": {
                        "document": {
                            "id": "3efc7fac-56ab-4e65-ac1b-37118936d823",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:93086"
            },
            {
                "action": {
                    "type": "SendMessage",
                    "settings": {
                        "id": "c812ad6f-67c0-40ab-b594-25bc35dca46f",
                        "type": "text/plain",
                        "content": "{{contentMsg}}"
                    },
                    "$cardContent": {
                        "document": {
                            "id": "c812ad6f-67c0-40ab-b594-25bc35dca46f",
                            "type": "text/plain",
                            "content": "{{contentMsg}}"
                        },
                        "editable": true,
                        "deletable": true,
                        "position": "left"
                    }
                },
                "$invalid": false,
                "$$hashKey": "object:93087"
            },
            {
                "input": {
                    "bypass": false,
                    "$cardContent": {
                        "document": {
                            "id": "10312940-9b93-4375-8578-b905500e6432",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$invalid": false,
                "$$hashKey": "object:93088"
            }
        ],
        "$conditionOutputs": [
            {
                "stateId": "fcb2f3fd-3498-4d67-9280-eff889522979",
                "$connId": "con_1758",
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "notEquals",
                        "values": ["Input inesperado"],
                        "variable": "validInput",
                        "$$hashKey": "object:93304"
                    }
                ],
                "$invalid": false,
                "$$hashKey": "object:93285"
            }
        ],
        "$enteringCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "Choose MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(exceptionReturn) {\n    var contentCard = new Object(); \n    contentCard.msg = 'Digite seu endereço na seguinte ordem:\\n\\n{{boldTags@open}}Bairro, Cidade, Estado{{boldTags@close}}';\n    contentCard.isVisible = true;\n    \n    if (exceptionReturn) {\n        var rules = JSON.parse(exceptionReturn);\n        if (!rules.showMsg) {\n            contentCard.msg = '';\n            contentCard.isVisible = false;\n        }\n    }\n\n    return contentCard;\n}",
                    "inputVariables": ["exceptionReturn"],
                    "outputVariable": "contentCard"
                },
                "conditions": []
            },
            {
                "type": "ExecuteScript",
                "$title": "Format MSG",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "function run(contentCard) {\n    var msg = \"\";\n    \n    if(contentCard)\n    {\n        var card = JSON.parse(contentCard);\n        msg = card.msg;\n    }\n\n    return msg;\n}",
                    "inputVariables": ["contentCard"],
                    "outputVariable": "contentMsg"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicita conjunto exibicao",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao bairro cidade estado",
                    "action": "exibicao"
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "equals",
                        "variable": "contentCard@isVisible",
                        "values": ["true"],
                        "$$hashKey": "object:97322"
                    }
                ]
            }
        ],
        "$leavingCustomActions": [
            {
                "type": "ExecuteScript",
                "$title": "VALIDACAO ENTRADA",
                "$invalid": false,
                "settings": {
                    "function": "run",
                    "source": "//Input: input.content\n//Output: validInput\n\nfunction run(input) {\n    let removeDigits = /\\d+/;\n    let aux;\n    const invalid = \"Input inesperado\";\n    let re = /([a-zA-Z\\u00C0-\\u00FF ']{3,40})+/;\n    var result = new Object();\n    var bairro, cidade, estado, splitted;\n\n    try{\n        if(removeDigits.test(input)){\n            aux = input.match(removeDigits)[0];\n            if(aux.length != 1){\n                return invalid;\n            }\n        }            \n\n        input = input.replace(/( +(?= )|^\\s+|\\s+$)/g,'');\n\n        const optionsRegex = {\n            \"(minas|^mg$)\": \"MG\",\n            \"(s(ã|a)o\\\\s*paulo|^sp$)\": \"SP\",\n            \"(^rio$|rio\\\\s*de\\\\s*janeiro|^rj$)\": \"RJ\",\n            \"(esp(í|i)rito\\\\s*santo|^es$)\": \"ES\",\n            \"(paran(á|a)|^pr$)\": \"PR\",\n            \"(santa\\\\s*catarina|^sc$)\": \"SC\",\n            \"(rio\\\\s*grande\\\\s*(do\\\\s*)?sul|^rs$)\": \"RS\",\n            \"(bahia|^ba$)\": \"BA\",\n            \"(sergipe|^se$)\": \"SE\",\n            \"(alagoas|^al$)\": \"AL\",\n            \"(pernambuco|^pe$)\": \"PE\",\n            \"(para(í|i)ba|^pb$)\": \"PB\",\n            \"(rio\\\\s*grande\\\\s*(do\\\\s*)?norte|^rn$)\": \"RN\",\n            \"(ce(á|a)r(á|a)|^ce$)\": \"CE\",\n            \"(pia(ú|u)(í|i)|^pi$)\": \"PI\",\n            \"(maranh(ã|a)o|^ma$)\": \"MA\",\n            \"(tocantins|^to$)\": \"TO\",\n            \"(go(í|i)(á|a)s|^go$)\": \"GO\",\n            \"(mato\\\\s*grosso\\\\s*do\\\\s*sul|^ms$)\": \"MS\",\n            \"(mato\\\\s*grosso|^mt$)\": \"MT\",\n            \"(par(á|a)|^pa$)\": \"PA\",\n            \"(amap(á|a)|^ap$)\": \"AP\",\n            \"(rond(o|ô)nia|^ro$)\": \"RO\",\n            \"(acre|^ac$)\": \"AC\",\n            \"(amazonas|^am$)\": \"AM\",\n            \"(roraima|^rr$)\": \"RR\",\n        };\n\n        if(re.test(input)){\n            splitted = input.split(\",\");\n            bairro = splitted[0].match(re)[0];\n            cidade = splitted[1].match(re)[0];\n            aux = splitted[2].match(re)[0];\n        }\n\n        for(let key in optionsRegex) {\n\n            if(optionsRegex.hasOwnProperty(key)) {\n                const matching = new RegExp(key, \"i\");\n\n                if(matching.test(aux)) {\n                    estado = optionsRegex[key];\n                }\n            }\n        }\n\n        if(bairro != null && cidade != null && estado != null){\n            result.bairro = bairro;\n            result.cidade = cidade;\n            result.estado = estado;\n            return result;\n        }\n\n    }catch(e){\n        console.log(e);\n        return invalid;\n    }\n    return invalid;\n}",
                    "inputVariables": ["input.content"],
                    "outputVariable": "validInput"
                },
                "conditions": []
            },
            {
                "type": "MergeContact",
                "$title": "Update BAIRRO/CIDADE/ESTADO",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "estado": "{{validInput@estado}}",
                        "cidade": "{{validInput@cidade}}",
                        "bairro": "{{validInput@bairro}}"
                    },
                    "name": "{{contact.name}}"
                },
                "conditions": [
                    {
                        "comparison": "notEquals",
                        "source": "context",
                        "variable": "validInput",
                        "values": ["Input inesperado"],
                        "$$hashKey": "object:95689"
                    }
                ]
            },
            {
                "type": "SetVariable",
                "$title": "SET EXCEPTION IDENTIFIER",
                "$invalid": false,
                "settings": {
                    "value": "5.9",
                    "variable": "exceptionIdentifier"
                },
                "conditions": []
            },
            {
                "type": "TrackEvent",
                "$title": "Solicitacao bairro cidade estado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Solicitacao bairro cidade estado",
                    "action": "{{validInput@estado}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:9558",
                        "source": "context",
                        "comparison": "notEquals",
                        "variable": "validInput",
                        "values": ["Input inesperado"]
                    }
                ]
            },
            {
                "type": "TrackEvent",
                "$title": "Inesperado bairro cidade estado",
                "$invalid": false,
                "settings": {
                    "extras": {
                        "nome do usuario": "{{contact.name}}",
                        "idUser": "{{contact.identity}}",
                        "Texto da mensagem": "{{input.content}}",
                        "Origem": "{{context.flOrigem}}",
                        "placa": "{{contact.extras.plate}}",
                        "email": "{{contact.email}}",
                        "telefone": "{{contact.phoneNumber}}",
                        "cidade": "{{contact.extras.cidade}}",
                        "estado": "{{contact.extras.estado}}",
                        "servico": "{{context.requestedService}}",
                        "CNPJ fornecedor": "{{schedule@fornecedor.cnpj}}",
                        "nome fornecedor": "{{schedule@fornecedor.nomeFantasia}}",
                        "data agendamento": "{{confirmedSchedule@ConfirmationDate}}",
                        "hora agendamento": "{{confirmedSchedule@ConfirmationHour}}",
                        "data e hora agendamento": "{{schedule@dataHorarioAgendado}}"
                    },
                    "category": "Inesperado bairro cidade estado",
                    "action": "{{input.content}}"
                },
                "conditions": [
                    {
                        "$$hashKey": "object:99304",
                        "source": "context",
                        "comparison": "equals",
                        "variable": "validInput",
                        "values": ["Input inesperado"]
                    }
                ]
            }
        ],
        "$inputSuggestions": [],
        "$tags": [
            {
                "background": "#61D36F",
                "label": "TrackEvent",
                "id": "blip-tag-9b5a23ef-9630-bea7-52d1-ebed5f470a1b",
                "canChangeBackground": false
            },
            {
                "background": "#FF1E90",
                "label": "MergeContact",
                "id": "blip-tag-86ea71d8-f490-77f7-b4e3-28a05d2a67b2",
                "canChangeBackground": false
            },
            {
                "background": "#FF961E",
                "label": "ExecuteScript",
                "id": "blip-tag-979becce-a31d-0bd9-b183-b6f047a51681",
                "canChangeBackground": false
            },
            {
                "background": "#FF4A1E",
                "label": "SetVariable",
                "id": "blip-tag-ce334c36-d386-2984-26ec-74d853d78760",
                "canChangeBackground": false
            }
        ],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "id": "ea3a6879-a6f9-4ee1-97ce-441ffdc3a4f2",
        "root": false,
        "$title": "C.1.6.1 - Solicita Conjunto",
        "$position": { "top": "408px", "left": "1474px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    },
    "91b588a2-01d5-493f-b39d-c4b1f9532681": {
        "$contentActions": [
            {
                "input": {
                    "bypass": true,
                    "$cardContent": {
                        "document": {
                            "id": "76d23b23-b444-46ab-8348-777d9f0684c6",
                            "type": "text/plain",
                            "textContent": "Entrada do usuário",
                            "content": "Entrada do usuário"
                        },
                        "editable": false,
                        "deletable": true,
                        "position": "right",
                        "editing": false
                    },
                    "$invalid": false
                },
                "$$hashKey": "object:11634",
                "$invalid": false
            }
        ],
        "$conditionOutputs": [],
        "$enteringCustomActions": [],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$defaultOutput": { "stateId": "fallback", "$invalid": false },
        "$tags": [],
        "id": "91b588a2-01d5-493f-b39d-c4b1f9532681",
        "root": false,
        "$title": "Set to F.1.0",
        "$position": { "top": "1929px", "left": "1266px" },
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    }
}
